{"version":3,"file":"index.cjs","sources":["../../../../packages/playground/storage/src/lib/github.ts","../../../../packages/playground/storage/src/lib/changeset.ts","../../../../packages/playground/storage/src/lib/browser-fs.ts","../../../../isomorphic-git/src/utils/fromValue.js","../../../../isomorphic-git/src/utils/getIterator.js","../../../../isomorphic-git/src/utils/StreamReader.js","../../../../isomorphic-git/src/utils/padHex.js","../../../../isomorphic-git/src/models/GitPktLine.js","../../../../isomorphic-git/src/errors/BaseError.js","../../../../isomorphic-git/src/errors/InternalError.js","../../../../isomorphic-git/src/errors/UnsafeFilepathError.js","../../../../isomorphic-git/src/utils/compareStrings.js","../../../../isomorphic-git/src/utils/comparePath.js","../../../../isomorphic-git/src/utils/compareTreeEntryPath.js","../../../../isomorphic-git/src/models/GitTree.js","../../../../isomorphic-git/src/utils/formatAuthor.js","../../../../isomorphic-git/src/utils/normalizeNewlines.js","../../../../isomorphic-git/src/utils/parseAuthor.js","../../../../isomorphic-git/src/models/GitAnnotatedTag.js","../../../../isomorphic-git/src/utils/indent.js","../../../../isomorphic-git/src/utils/outdent.js","../../../../isomorphic-git/src/models/GitCommit.js","../../../../isomorphic-git/src/models/GitObject.js","../../../../isomorphic-git/src/utils/BufferCursor.js","../../../../isomorphic-git/src/utils/applyDelta.js","../../../../isomorphic-git/src/utils/git-list-pack.js","../../../../isomorphic-git/src/utils/inflate.js","../../../../node_modules/inherits/inherits_browser.js","../../../../node_modules/base64-js/index.js","../../../../node_modules/ieee754/index.js","../../../../node_modules/buffer/index.js","../../../../node_modules/safe-buffer/index.js","../../../../node_modules/sha.js/hash.js","../../../../node_modules/sha.js/sha1.js","../../../../isomorphic-git/src/utils/toHex.js","../../../../isomorphic-git/src/utils/shasum.js","../../../../isomorphic-git/src/models/GitPackIndex.js","../../../../isomorphic-git/src/errors/InvalidOidError.js","../../../../isomorphic-git/src/errors/ObjectTypeError.js","../../../../isomorphic-git/src/utils/forAwait.js","../../../../isomorphic-git/src/utils/collect.js","../../../../isomorphic-git/src/utils/FIFO.js","../../../../isomorphic-git/src/models/GitSideBand.js","../../../../isomorphic-git/src/wire/parseUploadPackResponse.js","../../../../packages/playground/storage/src/lib/git-sparse-checkout.ts","../../../../packages/playground/storage/src/lib/paths.ts","../../../../packages/playground/storage/src/lib/filesystems.ts"],"sourcesContent":["import { Semaphore } from '@php-wasm/util';\nimport { Octokit } from 'octokit';\nimport type { Changeset } from './changeset';\n\nexport type GithubClient = ReturnType<typeof createClient>;\n\nexport function createClient(githubToken: string): Octokit {\n\tconst octokit = new Octokit({\n\t\tauth: githubToken,\n\t});\n\treturn octokit;\n}\n\nexport type Files = Record<string, Uint8Array>;\nexport function filesListToObject(files: any[], root = '') {\n\tif (root.length && !root.endsWith('/')) {\n\t\troot += '/';\n\t}\n\tconst result: Files = {};\n\tfor (const file of files) {\n\t\tif (file.path.startsWith(root)) {\n\t\t\tresult[file.path.substring(root.length)] = file.content;\n\t\t}\n\t}\n\treturn result;\n}\n\nexport interface GetFilesProgress {\n\tfoundFiles: number;\n\tdownloadedFiles: number;\n}\nexport interface GetFilesOptions {\n\tonProgress?: ({ foundFiles, downloadedFiles }: GetFilesProgress) => void;\n\tprogress?: GetFilesProgress;\n}\nexport async function getFilesFromDirectory(\n\toctokit: GithubClient,\n\towner: string,\n\trepo: string,\n\tref: string,\n\tpath: string,\n\toptions: GetFilesOptions = {}\n) {\n\tif (!options.progress) {\n\t\toptions.progress = {\n\t\t\tfoundFiles: 0,\n\t\t\tdownloadedFiles: 0,\n\t\t};\n\t}\n\tconst { onProgress } = options;\n\tconst filePromises: Promise<any>[] = [];\n\tconst directoryPromises: Promise<any>[] = [];\n\n\t// Fetch the content of the directory\n\tconst { data: content } = await octokit.rest.repos.getContent({\n\t\towner,\n\t\trepo,\n\t\tpath,\n\t\tref,\n\t});\n\tif (!Array.isArray(content)) {\n\t\tthrow new Error(\n\t\t\t`Expected the list of files to be an array, but got ${typeof content}`\n\t\t);\n\t}\n\n\tfor (const item of content) {\n\t\tif (item.type === 'file') {\n\t\t\t++options.progress.foundFiles;\n\t\t\tonProgress?.(options.progress);\n\t\t\tfilePromises.push(\n\t\t\t\tgetFileContent(octokit, owner, repo, ref, item).then((file) => {\n\t\t\t\t\t++options.progress!.downloadedFiles;\n\t\t\t\t\tonProgress?.(options.progress!);\n\t\t\t\t\treturn file;\n\t\t\t\t})\n\t\t\t);\n\t\t} else if (item.type === 'dir') {\n\t\t\tdirectoryPromises.push(\n\t\t\t\tgetFilesFromDirectory(\n\t\t\t\t\toctokit,\n\t\t\t\t\towner,\n\t\t\t\t\trepo,\n\t\t\t\t\tref,\n\t\t\t\t\titem.path,\n\t\t\t\t\toptions\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tconst files = await Promise.all(filePromises);\n\tconst filesInDirs = (await Promise.all(directoryPromises)).flatMap(\n\t\t(dir) => dir\n\t);\n\treturn [...files, ...filesInDirs];\n}\n\nconst semaphore = new Semaphore({ concurrency: 15 });\nasync function getFileContent(\n\toctokit: GithubClient,\n\towner: string,\n\trepo: string,\n\tref: string,\n\titem: { path: string; name: string }\n) {\n\tconst release = await semaphore.acquire();\n\ttry {\n\t\tconst { data: fileContent } = await octokit.rest.repos.getContent({\n\t\t\towner,\n\t\t\trepo,\n\t\t\tref,\n\t\t\tpath: item.path,\n\t\t});\n\t\tif (!('content' in fileContent)) {\n\t\t\tthrow new Error(`No content found for ${item.path}`);\n\t\t}\n\t\treturn {\n\t\t\tname: item.name,\n\t\t\tpath: item.path,\n\t\t\tcontent: base64ToUint8Array(fileContent.content),\n\t\t};\n\t} finally {\n\t\trelease();\n\t}\n}\n\nfunction base64ToUint8Array(base64: string) {\n\tconst binaryString = window.atob(base64); // This will convert base64 to binary string\n\tconst len = binaryString.length;\n\tconst bytes = new Uint8Array(len);\n\tfor (let i = 0; i < len; i++) {\n\t\tbytes[i] = binaryString.charCodeAt(i);\n\t}\n\treturn bytes;\n}\n\n/**\n * Usage:\n * > await getArtifact('wordpress', 'wordpress-develop', 5511, 'build.yml')\n *\n * To get the first artifact produced by the \"build.yml\" workflow running\n * as a part of the PR 5511\n *\n * @returns\n */\nexport async function getArtifact(\n\toctokit: GithubClient,\n\towner: string,\n\trepo: string,\n\tpull_number: number,\n\tworkflow_id: string\n) {\n\tconst { data: pullRequest } = await octokit.rest.pulls.get({\n\t\towner,\n\t\trepo,\n\t\tpull_number,\n\t});\n\tconst workflowRuns = await octokit.rest.actions.listWorkflowRuns({\n\t\towner,\n\t\trepo,\n\t\tbranch: pullRequest.head.ref,\n\t\tworkflow_id,\n\t});\n\tconst runId = workflowRuns.data.workflow_runs[0]?.id;\n\tconst artifacts = await octokit.rest.actions.listWorkflowRunArtifacts({\n\t\towner,\n\t\trepo,\n\t\trun_id: runId,\n\t});\n\n\tconst artifact = await octokit.rest.actions.downloadArtifact({\n\t\towner,\n\t\trepo,\n\t\tartifact_id: artifacts.data.artifacts[0].id,\n\t\tarchive_format: 'zip',\n\t});\n\treturn artifact.data;\n}\n\nexport async function mayPush(octokit: Octokit, owner: string, repo: string) {\n\tconst { data: repository, headers } = await octokit.request(\n\t\t'GET /repos/{owner}/{repo}',\n\t\t{\n\t\t\towner,\n\t\t\trepo,\n\t\t}\n\t);\n\tif (!headers['x-oauth-scopes'] || !repository.permissions?.push) {\n\t\treturn false;\n\t}\n\n\t// @TODO Find a way to bubble up the following error earlier than on the\n\t//       first push attempt:\n\t//       \"organization has enabled OAuth App access restrictions\"\n\treturn true;\n}\n\nexport async function createOrUpdateBranch(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tbranch: string,\n\tnewHead: string\n) {\n\tconst branchExists = await octokit\n\t\t.request('GET /repos/{owner}/{repo}/branches/{branch}', {\n\t\t\towner,\n\t\t\trepo,\n\t\t\tbranch,\n\t\t})\n\t\t.then(\n\t\t\t() => true,\n\t\t\t() => false\n\t\t);\n\n\tif (branchExists) {\n\t\tawait octokit.request('PATCH /repos/{owner}/{repo}/git/refs/{ref}', {\n\t\t\towner,\n\t\t\trepo,\n\t\t\tsha: newHead,\n\t\t\tref: `heads/${branch}`,\n\t\t});\n\t} else {\n\t\tawait octokit.request('POST /repos/{owner}/{repo}/git/refs', {\n\t\t\towner,\n\t\t\trepo,\n\t\t\tsha: newHead,\n\t\t\tref: `refs/heads/${branch}`,\n\t\t});\n\t}\n}\n\n/**\n * @param octokit\n * @param owner\n * @param repo\n * @returns The owner of the forked repository\n */\nexport async function fork(octokit: Octokit, owner: string, repo: string) {\n\tconst user = await octokit.request('GET /user');\n\tconst forks = await octokit.request('GET /repos/{owner}/{repo}/forks', {\n\t\towner,\n\t\trepo,\n\t});\n\tconst hasFork = forks.data.find(\n\t\t(fork: any) => fork.owner && fork.owner.login === user.data.login\n\t);\n\n\tif (!hasFork) {\n\t\tawait octokit.request('POST /repos/{owner}/{repo}/forks', {\n\t\t\towner,\n\t\t\trepo,\n\t\t});\n\t}\n\n\treturn user.data.login;\n}\n\nexport async function createCommit(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tmessage: string,\n\tparentSha: string,\n\ttreeSha: string\n): Promise<string> {\n\tconst {\n\t\tdata: { sha },\n\t} = await octokit.request('POST /repos/{owner}/{repo}/git/commits', {\n\t\towner,\n\t\trepo,\n\t\tmessage,\n\t\ttree: treeSha,\n\t\tparents: [parentSha],\n\t});\n\n\treturn sha;\n}\n\nexport async function createTree(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tparentSha: string,\n\tchangeset: Changeset\n) {\n\tconst tree = await createTreeNodes(\n\t\toctokit,\n\t\towner,\n\t\trepo,\n\t\tparentSha,\n\t\tchangeset\n\t);\n\tif (tree.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst {\n\t\tdata: { sha: newTreeSha },\n\t} = await octokit.request('POST /repos/{owner}/{repo}/git/trees', {\n\t\towner,\n\t\trepo,\n\t\tbase_tree: parentSha,\n\t\ttree,\n\t});\n\treturn newTreeSha;\n}\n\nexport type GitHubTreeNode = {\n\tpath: string;\n\tmode: '100644';\n} & (\n\t| {\n\t\t\tsha: string | null;\n\t  }\n\t| {\n\t\t\tcontent: string;\n\t  }\n);\nexport async function createTreeNodes(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tparentSha: string,\n\tchangeset: Changeset\n): Promise<GitHubTreeNode[]> {\n\tconst blobsPromises = [];\n\tfor (const [path, content] of changeset.create) {\n\t\tblobsPromises.push(createTreeNode(octokit, owner, repo, path, content));\n\t}\n\tfor (const [path, content] of changeset.update) {\n\t\tblobsPromises.push(createTreeNode(octokit, owner, repo, path, content));\n\t}\n\tfor (const path of changeset.delete) {\n\t\tblobsPromises.push(deleteFile(octokit, owner, repo, parentSha, path));\n\t}\n\treturn Promise.all(blobsPromises).then(\n\t\t(blobs) => blobs.filter((blob) => !!blob) as GitHubTreeNode[]\n\t);\n}\n\nconst blobSemaphore = new Semaphore({ concurrency: 10 });\nexport async function createTreeNode(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tpath: string,\n\tcontent: string | Uint8Array\n): Promise<GitHubTreeNode> {\n\tconst release = await blobSemaphore.acquire();\n\ttry {\n\t\tif (ArrayBuffer.isView(content)) {\n\t\t\ttry {\n\t\t\t\t// Attempt to decode the byteArray as a UTF-8 string\n\t\t\t\tconst stringContent = new TextDecoder('utf-8', {\n\t\t\t\t\tfatal: true,\n\t\t\t\t}).decode(content);\n\t\t\t\treturn {\n\t\t\t\t\tpath,\n\t\t\t\t\tcontent: stringContent,\n\t\t\t\t\tmode: '100644',\n\t\t\t\t};\n\t\t\t} catch {\n\t\t\t\t// If an error occurs, the byteArray is not valid UTF-8 and we must\n\t\t\t\t// create a blob first\n\t\t\t\tconst {\n\t\t\t\t\tdata: { sha },\n\t\t\t\t} = await octokit.rest.git.createBlob({\n\t\t\t\t\towner,\n\t\t\t\t\trepo,\n\t\t\t\t\tencoding: 'base64',\n\t\t\t\t\tcontent: uint8ArrayToBase64(content),\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tpath,\n\t\t\t\t\tsha,\n\t\t\t\t\tmode: '100644',\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\t// Content is a string\n\t\t\treturn {\n\t\t\t\tpath,\n\t\t\t\tcontent,\n\t\t\t\tmode: '100644',\n\t\t\t};\n\t\t}\n\t} finally {\n\t\trelease();\n\t}\n}\n\nexport async function deleteFile(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tparentSha: string,\n\tpath: string\n): Promise<GitHubTreeNode | undefined> {\n\tconst release = await blobSemaphore.acquire();\n\ttry {\n\t\t// Deleting a non-existent file from a tree leads to an\n\t\t// \"GitRPC::BadObjectState\" error, so we only attempt to delete the file if\n\t\t// it exists.\n\t\tawait octokit.request('HEAD /repos/{owner}/{repo}/contents/:path', {\n\t\t\towner,\n\t\t\trepo,\n\t\t\tref: parentSha,\n\t\t\tpath,\n\t\t});\n\n\t\treturn {\n\t\t\tpath,\n\t\t\tmode: '100644',\n\t\t\tsha: null,\n\t\t};\n\t} catch {\n\t\t// Pass\n\t\treturn undefined;\n\t} finally {\n\t\trelease();\n\t}\n}\n\nfunction uint8ArrayToBase64(bytes: Uint8Array) {\n\tconst binary = [];\n\tconst len = bytes.byteLength;\n\tfor (let i = 0; i < len; i++) {\n\t\tbinary.push(String.fromCharCode(bytes[i]));\n\t}\n\treturn window.btoa(binary.join(''));\n}\n","import type { UniversalPHP } from '@php-wasm/universal';\nimport { joinPaths, normalizePath } from '@php-wasm/util';\n\nexport type IterateFilesOptions = {\n\t/**\n\t * Should yield paths relative to the root directory?\n\t * If false, all paths will be absolute.\n\t */\n\trelativePaths?: boolean;\n\n\t/**\n\t * The root directory that Playground paths start from.\n\t */\n\tplaygroundRoot?: string;\n\n\t/**\n\t * A prefix to add to all paths.\n\t * Only used if `relativePaths` is true.\n\t */\n\tpathPrefix?: string;\n\n\t/**\n\t * A list of paths to exclude from the results.\n\t */\n\texceptPaths?: string[];\n};\n\n/**\n * Iterates over all files in a Playground directory and its subdirectories.\n *\n * @param playground - The Playground/PHP instance.\n * @param root - The root directory to start iterating from.\n * @param options - Optional configuration.\n * @returns All files found in the tree.\n */\nexport async function* iterateFiles(\n\tplayground: UniversalPHP,\n\troot: string,\n\t{ exceptPaths = [] }: IterateFilesOptions = {}\n): AsyncGenerator<FileEntry> {\n\troot = normalizePath(root);\n\t// If the root is be a file, not a directory, then\n\t// just yield it and return immediately.\n\tif (!(await playground.isDir(root))) {\n\t\tif (await playground.fileExists(root)) {\n\t\t\tyield {\n\t\t\t\tpath: root,\n\t\t\t\tread: async () => await playground.readFileAsBuffer(root),\n\t\t\t};\n\t\t}\n\t\treturn;\n\t}\n\n\tconst stack: string[] = [root];\n\twhile (stack.length) {\n\t\tconst currentParent = stack.pop();\n\t\tif (!currentParent) {\n\t\t\treturn;\n\t\t}\n\t\tconst files = await playground.listFiles(currentParent);\n\t\tfor (const file of files) {\n\t\t\tconst absPath = joinPaths(currentParent, file);\n\t\t\tif (exceptPaths.includes(absPath.substring(root.length + 1))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (await playground.isDir(absPath)) {\n\t\t\t\tstack.push(absPath);\n\t\t\t} else {\n\t\t\t\tyield {\n\t\t\t\t\tpath: absPath,\n\t\t\t\t\tread: async () =>\n\t\t\t\t\t\tawait playground.readFileAsBuffer(absPath),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport type FileEntry = {\n\tpath: string;\n\tread: () => Promise<Uint8Array>;\n};\n\n/**\n * Represents a set of changes to be applied to a data store.\n */\nexport type Changeset = {\n\t/**\n\t * Created files.\n\t */\n\tcreate: Map<string, Uint8Array>;\n\n\t/**\n\t * Updated files.\n\t */\n\tupdate: Map<string, Uint8Array>;\n\n\t/**\n\t * Deleted files.\n\t */\n\tdelete: Set<string>;\n};\n\n/**\n * Compares two sets of files and returns a changeset object that describes\n * the differences between them.\n *\n * @param filesBefore - A map of file paths to Uint8Array objects representing the contents\n *                      of the files before the changes.\n * @param filesAfter - An async generator that yields FileEntry objects representing the files\n *                     after the changes.\n * @returns A changeset object that describes the differences between the two sets of files.\n */\nexport async function changeset(\n\tfilesBefore: Map<string, Uint8Array>,\n\tfilesAfter: AsyncGenerator<FileEntry> | Iterable<FileEntry>\n) {\n\tconst changes: Changeset = {\n\t\tcreate: new Map(),\n\t\tupdate: new Map(),\n\t\tdelete: new Set(),\n\t};\n\n\tconst seenFilesAfter = new Set<string>();\n\tfor await (const fileAfter of filesAfter) {\n\t\tseenFilesAfter.add(fileAfter.path);\n\n\t\tconst before = filesBefore.get(fileAfter.path);\n\t\tconst after = await fileAfter.read();\n\t\tif (before) {\n\t\t\tif (!uint8arraysEqual(before, after)) {\n\t\t\t\tchanges.update.set(fileAfter.path, after);\n\t\t\t}\n\t\t} else {\n\t\t\tchanges.create.set(fileAfter.path, after);\n\t\t}\n\t}\n\n\tfor (const pathBefore of filesBefore.keys()) {\n\t\tif (!seenFilesAfter.has(pathBefore)) {\n\t\t\tchanges.delete.add(pathBefore);\n\t\t}\n\t}\n\n\treturn changes;\n}\n\nfunction uint8arraysEqual(a: Uint8Array, b: Uint8Array): boolean {\n\treturn a.length === b.length && a.every((val, index) => val === b[index]);\n}\n","import type { MountDevice } from '@php-wasm/web';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport type * as pleaseLoadTypes from 'wicg-file-system-access';\n\nexport async function directoryHandleFromMountDevice(\n\tdevice: MountDevice\n): Promise<FileSystemDirectoryHandle> {\n\tif (device.type === 'local-fs') {\n\t\treturn device.handle;\n\t}\n\n\treturn opfsPathToDirectoryHandle(device.path);\n}\n\nexport async function opfsPathToDirectoryHandle(\n\topfsPath: string\n): Promise<FileSystemDirectoryHandle> {\n\tconst parts = opfsPath.split('/').filter((p) => p.length > 0);\n\tlet handle = await navigator.storage.getDirectory();\n\tfor (const part of parts) {\n\t\thandle = await handle.getDirectoryHandle(part, { create: true });\n\t}\n\treturn handle;\n}\n\nexport async function directoryHandleToOpfsPath(\n\tdirectoryHandle: FileSystemDirectoryHandle\n): Promise<string> {\n\tconst root = await navigator.storage.getDirectory();\n\tconst pathParts = await root.resolve(directoryHandle);\n\tif (pathParts === null) {\n\t\tthrow new DOMException(\n\t\t\t'Unable to resolve path of OPFS directory handle.',\n\t\t\t'NotFoundError'\n\t\t);\n\t}\n\treturn '/' + pathParts.join('/');\n}\n\nexport async function clearContentsFromMountDevice(mountDevice: MountDevice) {\n\tconst parentHandle = await directoryHandleFromMountDevice(mountDevice);\n\tfor await (const name of parentHandle.keys()) {\n\t\tawait parentHandle.removeEntry(name, {\n\t\t\trecursive: true,\n\t\t});\n\t}\n}\n","// Convert a value to an Async Iterator\n// This will be easier with async generator functions.\nexport function fromValue(value) {\n  let queue = [value]\n  return {\n    next() {\n      return Promise.resolve({ done: queue.length === 0, value: queue.pop() })\n    },\n    return() {\n      queue = []\n      return {}\n    },\n    [Symbol.asyncIterator]() {\n      return this\n    },\n  }\n}\n","import { fromValue } from '../utils/fromValue.js'\n\nexport function getIterator(iterable) {\n  if (iterable[Symbol.asyncIterator]) {\n    return iterable[Symbol.asyncIterator]()\n  }\n  if (iterable[Symbol.iterator]) {\n    return iterable[Symbol.iterator]()\n  }\n  if (iterable.next) {\n    return iterable\n  }\n  return fromValue(iterable)\n}\n","import { getIterator } from './getIterator.js'\n\n// inspired by 'gartal' but lighter-weight and more battle-tested.\nexport class StreamReader {\n  constructor(stream) {\n    // TODO: fix usage in bundlers before Buffer dependency is removed #1855\n    if (typeof Buffer === 'undefined') {\n      throw new Error('Missing Buffer dependency')\n    }\n    this.stream = getIterator(stream)\n    this.buffer = null\n    this.cursor = 0\n    this.undoCursor = 0\n    this.started = false\n    this._ended = false\n    this._discardedBytes = 0\n  }\n\n  eof() {\n    return this._ended && this.cursor === this.buffer.length\n  }\n\n  tell() {\n    return this._discardedBytes + this.cursor\n  }\n\n  async byte() {\n    if (this.eof()) return\n    if (!this.started) await this._init()\n    if (this.cursor === this.buffer.length) {\n      await this._loadnext()\n      if (this._ended) return\n    }\n    this._moveCursor(1)\n    return this.buffer[this.undoCursor]\n  }\n\n  async chunk() {\n    if (this.eof()) return\n    if (!this.started) await this._init()\n    if (this.cursor === this.buffer.length) {\n      await this._loadnext()\n      if (this._ended) return\n    }\n    this._moveCursor(this.buffer.length)\n    return this.buffer.slice(this.undoCursor, this.cursor)\n  }\n\n  async read(n) {\n    if (this.eof()) return\n    if (!this.started) await this._init()\n    if (this.cursor + n > this.buffer.length) {\n      this._trim()\n      await this._accumulate(n)\n    }\n    this._moveCursor(n)\n    return this.buffer.slice(this.undoCursor, this.cursor)\n  }\n\n  async skip(n) {\n    if (this.eof()) return\n    if (!this.started) await this._init()\n    if (this.cursor + n > this.buffer.length) {\n      this._trim()\n      await this._accumulate(n)\n    }\n    this._moveCursor(n)\n  }\n\n  async undo() {\n    this.cursor = this.undoCursor\n  }\n\n  async _next() {\n    this.started = true\n    let { done, value } = await this.stream.next()\n    if (done) {\n      this._ended = true\n      if (!value) return Buffer.alloc(0)\n    }\n    if (value) {\n      value = Buffer.from(value)\n    }\n    return value\n  }\n\n  _trim() {\n    // Throw away parts of the buffer we don't need anymore\n    // assert(this.cursor <= this.buffer.length)\n    this.buffer = this.buffer.slice(this.undoCursor)\n    this.cursor -= this.undoCursor\n    this._discardedBytes += this.undoCursor\n    this.undoCursor = 0\n  }\n\n  _moveCursor(n) {\n    this.undoCursor = this.cursor\n    this.cursor += n\n    if (this.cursor > this.buffer.length) {\n      this.cursor = this.buffer.length\n    }\n  }\n\n  async _accumulate(n) {\n    if (this._ended) return\n    // Expand the buffer until we have N bytes of data\n    // or we've reached the end of the stream\n    const buffers = [this.buffer]\n    while (this.cursor + n > lengthBuffers(buffers)) {\n      const nextbuffer = await this._next()\n      if (this._ended) break\n      buffers.push(nextbuffer)\n    }\n    this.buffer = Buffer.concat(buffers)\n  }\n\n  async _loadnext() {\n    this._discardedBytes += this.buffer.length\n    this.undoCursor = 0\n    this.cursor = 0\n    this.buffer = await this._next()\n  }\n\n  async _init() {\n    this.buffer = await this._next()\n  }\n}\n\n// This helper function helps us postpone concatenating buffers, which\n// would create intermediate buffer objects,\nfunction lengthBuffers(buffers) {\n  return buffers.reduce((acc, buffer) => acc + buffer.length, 0)\n}\n","export function padHex(b, n) {\n  const s = n.toString(16)\n  return '0'.repeat(b - s.length) + s\n}\n","/**\npkt-line Format\n---------------\n\nMuch (but not all) of the payload is described around pkt-lines.\n\nA pkt-line is a variable length binary string.  The first four bytes\nof the line, the pkt-len, indicates the total length of the line,\nin hexadecimal.  The pkt-len includes the 4 bytes used to contain\nthe length's hexadecimal representation.\n\nA pkt-line MAY contain binary data, so implementers MUST ensure\npkt-line parsing/formatting routines are 8-bit clean.\n\nA non-binary line SHOULD BE terminated by an LF, which if present\nMUST be included in the total length. Receivers MUST treat pkt-lines\nwith non-binary data the same whether or not they contain the trailing\nLF (stripping the LF if present, and not complaining when it is\nmissing).\n\nThe maximum length of a pkt-line's data component is 65516 bytes.\nImplementations MUST NOT send pkt-line whose length exceeds 65520\n(65516 bytes of payload + 4 bytes of length data).\n\nImplementations SHOULD NOT send an empty pkt-line (\"0004\").\n\nA pkt-line with a length field of 0 (\"0000\"), called a flush-pkt,\nis a special case and MUST be handled differently than an empty\npkt-line (\"0004\").\n\n----\n  pkt-line     =  data-pkt / flush-pkt\n\n  data-pkt     =  pkt-len pkt-payload\n  pkt-len      =  4*(HEXDIG)\n  pkt-payload  =  (pkt-len - 4)*(OCTET)\n\n  flush-pkt    = \"0000\"\n----\n\nExamples (as C-style strings):\n\n----\n  pkt-line          actual value\n  ---------------------------------\n  \"0006a\\n\"         \"a\\n\"\n  \"0005a\"           \"a\"\n  \"000bfoobar\\n\"    \"foobar\\n\"\n  \"0004\"            \"\"\n----\n*/\nimport { StreamReader } from '../utils/StreamReader.js'\nimport { padHex } from '../utils/padHex.js'\n\n// I'm really using this more as a namespace.\n// There's not a lot of \"state\" in a pkt-line\n\nexport class GitPktLine {\n  static flush() {\n    return Buffer.from('0000', 'utf8')\n  }\n\n  static delim() {\n    return Buffer.from('0001', 'utf8')\n  }\n\n  static encode(line) {\n    if (typeof line === 'string') {\n      line = Buffer.from(line)\n    }\n    const length = line.length + 4\n    const hexlength = padHex(4, length)\n    return Buffer.concat([Buffer.from(hexlength, 'utf8'), line])\n  }\n\n  static streamReader(stream) {\n    const reader = new StreamReader(stream)\n    return async function read() {\n      try {\n        let length = await reader.read(4)\n        if (length == null) return true\n        length = parseInt(length.toString('utf8'), 16)\n        if (length === 0) return null\n        if (length === 1) return null // delim packets\n        const buffer = await reader.read(length - 4)\n        if (buffer == null) return true\n        return buffer\n      } catch (err) {\n        stream.error = err\n        return true\n      }\n    }\n  }\n}\n","export class BaseError extends Error {\n  constructor(message) {\n    super(message)\n    // Setting this here allows TS to infer that all git errors have a `caller` property and\n    // that its type is string.\n    this.caller = ''\n  }\n\n  toJSON() {\n    // Error objects aren't normally serializable. So we do something about that.\n    return {\n      code: this.code,\n      data: this.data,\n      caller: this.caller,\n      message: this.message,\n      stack: this.stack,\n    }\n  }\n\n  fromJSON(json) {\n    const e = new BaseError(json.message)\n    e.code = json.code\n    e.data = json.data\n    e.caller = json.caller\n    e.stack = json.stack\n    return e\n  }\n\n  get isIsomorphicGitError() {\n    return true\n  }\n}\n","import { BaseError } from './BaseError.js'\n\nexport class InternalError extends BaseError {\n  /**\n   * @param {string} message\n   */\n  constructor(message) {\n    super(\n      `An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${message}`\n    )\n    this.code = this.name = InternalError.code\n    this.data = { message }\n  }\n}\n/** @type {'InternalError'} */\nInternalError.code = 'InternalError'\n","import { BaseError } from './BaseError.js'\n\nexport class UnsafeFilepathError extends BaseError {\n  /**\n   * @param {string} filepath\n   */\n  constructor(filepath) {\n    super(`The filepath \"${filepath}\" contains unsafe character sequences`)\n    this.code = this.name = UnsafeFilepathError.code\n    this.data = { filepath }\n  }\n}\n/** @type {'UnsafeFilepathError'} */\nUnsafeFilepathError.code = 'UnsafeFilepathError'\n","export function compareStrings(a, b) {\n  // https://stackoverflow.com/a/40355107/2168416\n  return -(a < b) || +(a > b)\n}\n","import { compareStrings } from './compareStrings'\n\nexport function comparePath(a, b) {\n  // https://stackoverflow.com/a/40355107/2168416\n  return compareStrings(a.path, b.path)\n}\n","import { compareStrings } from './compareStrings'\n\nexport function compareTreeEntryPath(a, b) {\n  // Git sorts tree entries as if there is a trailing slash on directory names.\n  return compareStrings(appendSlashIfDir(a), appendSlashIfDir(b))\n}\n\nfunction appendSlashIfDir(entry) {\n  return entry.mode === '040000' ? entry.path + '/' : entry.path\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { UnsafeFilepathError } from '../errors/UnsafeFilepathError.js'\nimport { comparePath } from '../utils/comparePath.js'\nimport { compareTreeEntryPath } from '../utils/compareTreeEntryPath.js'\n\n/**\n *\n * @typedef {Object} TreeEntry\n * @property {string} mode - the 6 digit hexadecimal mode\n * @property {string} path - the name of the file or directory\n * @property {string} oid - the SHA-1 object id of the blob or tree\n * @property {'commit'|'blob'|'tree'} type - the type of object\n */\n\nfunction mode2type(mode) {\n  // prettier-ignore\n  switch (mode) {\n    case '040000': return 'tree'\n    case '100644': return 'blob'\n    case '100755': return 'blob'\n    case '120000': return 'blob'\n    case '160000': return 'commit'\n  }\n  throw new InternalError(`Unexpected GitTree entry mode: ${mode}`)\n}\n\nfunction parseBuffer(buffer) {\n  const _entries = []\n  let cursor = 0\n  while (cursor < buffer.length) {\n    const space = buffer.indexOf(32, cursor)\n    if (space === -1) {\n      throw new InternalError(\n        `GitTree: Error parsing buffer at byte location ${cursor}: Could not find the next space character.`\n      )\n    }\n    const nullchar = buffer.indexOf(0, cursor)\n    if (nullchar === -1) {\n      throw new InternalError(\n        `GitTree: Error parsing buffer at byte location ${cursor}: Could not find the next null character.`\n      )\n    }\n    let mode = buffer.slice(cursor, space).toString('utf8')\n    if (mode === '40000') mode = '040000' // makes it line up neater in printed output\n    const type = mode2type(mode)\n    const path = buffer.slice(space + 1, nullchar).toString('utf8')\n\n    // Prevent malicious git repos from writing to \"..\\foo\" on clone etc\n    if (path.includes('\\\\') || path.includes('/')) {\n      throw new UnsafeFilepathError(path)\n    }\n\n    const oid = buffer.slice(nullchar + 1, nullchar + 21).toString('hex')\n    cursor = nullchar + 21\n    _entries.push({ mode, path, oid, type })\n  }\n  return _entries\n}\n\nfunction limitModeToAllowed(mode) {\n  if (typeof mode === 'number') {\n    mode = mode.toString(8)\n  }\n  // tree\n  if (mode.match(/^0?4.*/)) return '040000' // Directory\n  if (mode.match(/^1006.*/)) return '100644' // Regular non-executable file\n  if (mode.match(/^1007.*/)) return '100755' // Regular executable file\n  if (mode.match(/^120.*/)) return '120000' // Symbolic link\n  if (mode.match(/^160.*/)) return '160000' // Commit (git submodule reference)\n  throw new InternalError(`Could not understand file mode: ${mode}`)\n}\n\nfunction nudgeIntoShape(entry) {\n  if (!entry.oid && entry.sha) {\n    entry.oid = entry.sha // Github\n  }\n  entry.mode = limitModeToAllowed(entry.mode) // index\n  if (!entry.type) {\n    entry.type = mode2type(entry.mode) // index\n  }\n  return entry\n}\n\nexport class GitTree {\n  constructor(entries) {\n    if (Buffer.isBuffer(entries)) {\n      this._entries = parseBuffer(entries)\n    } else if (Array.isArray(entries)) {\n      this._entries = entries.map(nudgeIntoShape)\n    } else {\n      throw new InternalError('invalid type passed to GitTree constructor')\n    }\n    // Tree entries are not sorted alphabetically in the usual sense (see `compareTreeEntryPath`)\n    // but it is important later on that these be sorted in the same order as they would be returned from readdir.\n    this._entries.sort(comparePath)\n  }\n\n  static from(tree) {\n    return new GitTree(tree)\n  }\n\n  render() {\n    return this._entries\n      .map(entry => `${entry.mode} ${entry.type} ${entry.oid}    ${entry.path}`)\n      .join('\\n')\n  }\n\n  toObject() {\n    // Adjust the sort order to match git's\n    const entries = [...this._entries]\n    entries.sort(compareTreeEntryPath)\n    return Buffer.concat(\n      entries.map(entry => {\n        const mode = Buffer.from(entry.mode.replace(/^0/, ''))\n        const space = Buffer.from(' ')\n        const path = Buffer.from(entry.path, 'utf8')\n        const nullchar = Buffer.from([0])\n        const oid = Buffer.from(entry.oid, 'hex')\n        return Buffer.concat([mode, space, path, nullchar, oid])\n      })\n    )\n  }\n\n  /**\n   * @returns {TreeEntry[]}\n   */\n  entries() {\n    return this._entries\n  }\n\n  *[Symbol.iterator]() {\n    for (const entry of this._entries) {\n      yield entry\n    }\n  }\n}\n","export function formatAuthor({ name, email, timestamp, timezoneOffset }) {\n  timezoneOffset = formatTimezoneOffset(timezoneOffset)\n  return `${name} <${email}> ${timestamp} ${timezoneOffset}`\n}\n\n// The amount of effort that went into crafting these cases to handle\n// -0 (just so we don't lose that information when parsing and reconstructing)\n// but can also default to +0 was extraordinary.\n\nfunction formatTimezoneOffset(minutes) {\n  const sign = simpleSign(negateExceptForZero(minutes))\n  minutes = Math.abs(minutes)\n  const hours = Math.floor(minutes / 60)\n  minutes -= hours * 60\n  let strHours = String(hours)\n  let strMinutes = String(minutes)\n  if (strHours.length < 2) strHours = '0' + strHours\n  if (strMinutes.length < 2) strMinutes = '0' + strMinutes\n  return (sign === -1 ? '-' : '+') + strHours + strMinutes\n}\n\nfunction simpleSign(n) {\n  return Math.sign(n) || (Object.is(n, -0) ? -1 : 1)\n}\n\nfunction negateExceptForZero(n) {\n  return n === 0 ? n : -n\n}\n","export function normalizeNewlines(str) {\n  // remove all <CR>\n  str = str.replace(/\\r/g, '')\n  // no extra newlines up front\n  str = str.replace(/^\\n+/, '')\n  // and a single newline at the end\n  str = str.replace(/\\n+$/, '') + '\\n'\n  return str\n}\n","export function parseAuthor(author) {\n  const [, name, email, timestamp, offset] = author.match(\n    /^(.*) <(.*)> (.*) (.*)$/\n  )\n  return {\n    name: name,\n    email: email,\n    timestamp: Number(timestamp),\n    timezoneOffset: parseTimezoneOffset(offset),\n  }\n}\n\n// The amount of effort that went into crafting these cases to handle\n// -0 (just so we don't lose that information when parsing and reconstructing)\n// but can also default to +0 was extraordinary.\n\nfunction parseTimezoneOffset(offset) {\n  let [, sign, hours, minutes] = offset.match(/(\\+|-)(\\d\\d)(\\d\\d)/)\n  minutes = (sign === '+' ? 1 : -1) * (Number(hours) * 60 + Number(minutes))\n  return negateExceptForZero(minutes)\n}\n\nfunction negateExceptForZero(n) {\n  return n === 0 ? n : -n\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { formatAuthor } from '../utils/formatAuthor.js'\nimport { normalizeNewlines } from '../utils/normalizeNewlines.js'\nimport { parseAuthor } from '../utils/parseAuthor.js'\n\nexport class GitAnnotatedTag {\n  constructor(tag) {\n    if (typeof tag === 'string') {\n      this._tag = tag\n    } else if (Buffer.isBuffer(tag)) {\n      this._tag = tag.toString('utf8')\n    } else if (typeof tag === 'object') {\n      this._tag = GitAnnotatedTag.render(tag)\n    } else {\n      throw new InternalError(\n        'invalid type passed to GitAnnotatedTag constructor'\n      )\n    }\n  }\n\n  static from(tag) {\n    return new GitAnnotatedTag(tag)\n  }\n\n  static render(obj) {\n    return `object ${obj.object}\ntype ${obj.type}\ntag ${obj.tag}\ntagger ${formatAuthor(obj.tagger)}\n\n${obj.message}\n${obj.gpgsig ? obj.gpgsig : ''}`\n  }\n\n  justHeaders() {\n    return this._tag.slice(0, this._tag.indexOf('\\n\\n'))\n  }\n\n  message() {\n    const tag = this.withoutSignature()\n    return tag.slice(tag.indexOf('\\n\\n') + 2)\n  }\n\n  parse() {\n    return Object.assign(this.headers(), {\n      message: this.message(),\n      gpgsig: this.gpgsig(),\n    })\n  }\n\n  render() {\n    return this._tag\n  }\n\n  headers() {\n    const headers = this.justHeaders().split('\\n')\n    const hs = []\n    for (const h of headers) {\n      if (h[0] === ' ') {\n        // combine with previous header (without space indent)\n        hs[hs.length - 1] += '\\n' + h.slice(1)\n      } else {\n        hs.push(h)\n      }\n    }\n    const obj = {}\n    for (const h of hs) {\n      const key = h.slice(0, h.indexOf(' '))\n      const value = h.slice(h.indexOf(' ') + 1)\n      if (Array.isArray(obj[key])) {\n        obj[key].push(value)\n      } else {\n        obj[key] = value\n      }\n    }\n    if (obj.tagger) {\n      obj.tagger = parseAuthor(obj.tagger)\n    }\n    if (obj.committer) {\n      obj.committer = parseAuthor(obj.committer)\n    }\n    return obj\n  }\n\n  withoutSignature() {\n    const tag = normalizeNewlines(this._tag)\n    if (tag.indexOf('\\n-----BEGIN PGP SIGNATURE-----') === -1) return tag\n    return tag.slice(0, tag.lastIndexOf('\\n-----BEGIN PGP SIGNATURE-----'))\n  }\n\n  gpgsig() {\n    if (this._tag.indexOf('\\n-----BEGIN PGP SIGNATURE-----') === -1) return\n    const signature = this._tag.slice(\n      this._tag.indexOf('-----BEGIN PGP SIGNATURE-----'),\n      this._tag.indexOf('-----END PGP SIGNATURE-----') +\n        '-----END PGP SIGNATURE-----'.length\n    )\n    return normalizeNewlines(signature)\n  }\n\n  payload() {\n    return this.withoutSignature() + '\\n'\n  }\n\n  toObject() {\n    return Buffer.from(this._tag, 'utf8')\n  }\n\n  static async sign(tag, sign, secretKey) {\n    const payload = tag.payload()\n    let { signature } = await sign({ payload, secretKey })\n    // renormalize the line endings to the one true line-ending\n    signature = normalizeNewlines(signature)\n    const signedTag = payload + signature\n    // return a new tag object\n    return GitAnnotatedTag.from(signedTag)\n  }\n}\n","export function indent(str) {\n  return (\n    str\n      .trim()\n      .split('\\n')\n      .map(x => ' ' + x)\n      .join('\\n') + '\\n'\n  )\n}\n","export function outdent(str) {\n  return str\n    .split('\\n')\n    .map(x => x.replace(/^ /, ''))\n    .join('\\n')\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { formatAuthor } from '../utils/formatAuthor.js'\nimport { indent } from '../utils/indent.js'\nimport { normalizeNewlines } from '../utils/normalizeNewlines.js'\nimport { outdent } from '../utils/outdent.js'\nimport { parseAuthor } from '../utils/parseAuthor.js'\n\nexport class GitCommit {\n  constructor(commit) {\n    if (typeof commit === 'string') {\n      this._commit = commit\n    } else if (Buffer.isBuffer(commit)) {\n      this._commit = commit.toString('utf8')\n    } else if (typeof commit === 'object') {\n      this._commit = GitCommit.render(commit)\n    } else {\n      throw new InternalError('invalid type passed to GitCommit constructor')\n    }\n  }\n\n  static fromPayloadSignature({ payload, signature }) {\n    const headers = GitCommit.justHeaders(payload)\n    const message = GitCommit.justMessage(payload)\n    const commit = normalizeNewlines(\n      headers + '\\ngpgsig' + indent(signature) + '\\n' + message\n    )\n    return new GitCommit(commit)\n  }\n\n  static from(commit) {\n    return new GitCommit(commit)\n  }\n\n  toObject() {\n    return Buffer.from(this._commit, 'utf8')\n  }\n\n  // Todo: allow setting the headers and message\n  headers() {\n    return this.parseHeaders()\n  }\n\n  // Todo: allow setting the headers and message\n  message() {\n    return GitCommit.justMessage(this._commit)\n  }\n\n  parse() {\n    return Object.assign({ message: this.message() }, this.headers())\n  }\n\n  static justMessage(commit) {\n    return normalizeNewlines(commit.slice(commit.indexOf('\\n\\n') + 2))\n  }\n\n  static justHeaders(commit) {\n    return commit.slice(0, commit.indexOf('\\n\\n'))\n  }\n\n  parseHeaders() {\n    const headers = GitCommit.justHeaders(this._commit).split('\\n')\n    const hs = []\n    for (const h of headers) {\n      if (h[0] === ' ') {\n        // combine with previous header (without space indent)\n        hs[hs.length - 1] += '\\n' + h.slice(1)\n      } else {\n        hs.push(h)\n      }\n    }\n    const obj = {\n      parent: [],\n    }\n    for (const h of hs) {\n      const key = h.slice(0, h.indexOf(' '))\n      const value = h.slice(h.indexOf(' ') + 1)\n      if (Array.isArray(obj[key])) {\n        obj[key].push(value)\n      } else {\n        obj[key] = value\n      }\n    }\n    if (obj.author) {\n      obj.author = parseAuthor(obj.author)\n    }\n    if (obj.committer) {\n      obj.committer = parseAuthor(obj.committer)\n    }\n    return obj\n  }\n\n  static renderHeaders(obj) {\n    let headers = ''\n    if (obj.tree) {\n      headers += `tree ${obj.tree}\\n`\n    } else {\n      headers += `tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904\\n` // the null tree\n    }\n    if (obj.parent) {\n      if (obj.parent.length === undefined) {\n        throw new InternalError(`commit 'parent' property should be an array`)\n      }\n      for (const p of obj.parent) {\n        headers += `parent ${p}\\n`\n      }\n    }\n    const author = obj.author\n    headers += `author ${formatAuthor(author)}\\n`\n    const committer = obj.committer || obj.author\n    headers += `committer ${formatAuthor(committer)}\\n`\n    if (obj.gpgsig) {\n      headers += 'gpgsig' + indent(obj.gpgsig)\n    }\n    return headers\n  }\n\n  static render(obj) {\n    return GitCommit.renderHeaders(obj) + '\\n' + normalizeNewlines(obj.message)\n  }\n\n  render() {\n    return this._commit\n  }\n\n  withoutSignature() {\n    const commit = normalizeNewlines(this._commit)\n    if (commit.indexOf('\\ngpgsig') === -1) return commit\n    const headers = commit.slice(0, commit.indexOf('\\ngpgsig'))\n    const message = commit.slice(\n      commit.indexOf('-----END PGP SIGNATURE-----\\n') +\n        '-----END PGP SIGNATURE-----\\n'.length\n    )\n    return normalizeNewlines(headers + '\\n' + message)\n  }\n\n  isolateSignature() {\n    const signature = this._commit.slice(\n      this._commit.indexOf('-----BEGIN PGP SIGNATURE-----'),\n      this._commit.indexOf('-----END PGP SIGNATURE-----') +\n        '-----END PGP SIGNATURE-----'.length\n    )\n    return outdent(signature)\n  }\n\n  static async sign(commit, sign, secretKey) {\n    const payload = commit.withoutSignature()\n    const message = GitCommit.justMessage(commit._commit)\n    let { signature } = await sign({ payload, secretKey })\n    // renormalize the line endings to the one true line-ending\n    signature = normalizeNewlines(signature)\n    const headers = GitCommit.justHeaders(commit._commit)\n    const signedCommit =\n      headers + '\\n' + 'gpgsig' + indent(signature) + '\\n' + message\n    // return a new commit object\n    return GitCommit.from(signedCommit)\n  }\n}\n","import { InternalError } from '../errors/InternalError.js'\n\nexport class GitObject {\n  static wrap({ type, object }) {\n    return Buffer.concat([\n      Buffer.from(`${type} ${object.byteLength.toString()}\\x00`),\n      Buffer.from(object),\n    ])\n  }\n\n  static unwrap(buffer) {\n    const s = buffer.indexOf(32) // first space\n    const i = buffer.indexOf(0) // first null value\n    const type = buffer.slice(0, s).toString('utf8') // get type of object\n    const length = buffer.slice(s + 1, i).toString('utf8') // get type of object\n    const actualLength = buffer.length - (i + 1)\n    // verify length\n    if (parseInt(length) !== actualLength) {\n      throw new InternalError(\n        `Length mismatch: expected ${length} bytes but got ${actualLength} instead.`\n      )\n    }\n    return {\n      type,\n      object: Buffer.from(buffer.slice(i + 1)),\n    }\n  }\n}\n","// Modeled after https://github.com/tjfontaine/node-buffercursor\n// but with the goal of being much lighter weight.\nexport class BufferCursor {\n  constructor(buffer) {\n    this.buffer = buffer\n    this._start = 0\n  }\n\n  eof() {\n    return this._start >= this.buffer.length\n  }\n\n  tell() {\n    return this._start\n  }\n\n  seek(n) {\n    this._start = n\n  }\n\n  slice(n) {\n    const r = this.buffer.slice(this._start, this._start + n)\n    this._start += n\n    return r\n  }\n\n  toString(enc, length) {\n    const r = this.buffer.toString(enc, this._start, this._start + length)\n    this._start += length\n    return r\n  }\n\n  write(value, length, enc) {\n    const r = this.buffer.write(value, this._start, length, enc)\n    this._start += length\n    return r\n  }\n\n  copy(source, start, end) {\n    const r = source.copy(this.buffer, this._start, start, end)\n    this._start += r\n    return r\n  }\n\n  readUInt8() {\n    const r = this.buffer.readUInt8(this._start)\n    this._start += 1\n    return r\n  }\n\n  writeUInt8(value) {\n    const r = this.buffer.writeUInt8(value, this._start)\n    this._start += 1\n    return r\n  }\n\n  readUInt16BE() {\n    const r = this.buffer.readUInt16BE(this._start)\n    this._start += 2\n    return r\n  }\n\n  writeUInt16BE(value) {\n    const r = this.buffer.writeUInt16BE(value, this._start)\n    this._start += 2\n    return r\n  }\n\n  readUInt32BE() {\n    const r = this.buffer.readUInt32BE(this._start)\n    this._start += 4\n    return r\n  }\n\n  writeUInt32BE(value) {\n    const r = this.buffer.writeUInt32BE(value, this._start)\n    this._start += 4\n    return r\n  }\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { BufferCursor } from '../utils/BufferCursor.js'\n\n/**\n * @param {Buffer} delta\n * @param {Buffer} source\n * @returns {Buffer}\n */\nexport function applyDelta(delta, source) {\n  const reader = new BufferCursor(delta)\n  const sourceSize = readVarIntLE(reader)\n\n  if (sourceSize !== source.byteLength) {\n    throw new InternalError(\n      `applyDelta expected source buffer to be ${sourceSize} bytes but the provided buffer was ${source.length} bytes`\n    )\n  }\n  const targetSize = readVarIntLE(reader)\n  let target\n\n  const firstOp = readOp(reader, source)\n  // Speed optimization - return raw buffer if it's just single simple copy\n  if (firstOp.byteLength === targetSize) {\n    target = firstOp\n  } else {\n    // Otherwise, allocate a fresh buffer and slices\n    target = Buffer.alloc(targetSize)\n    const writer = new BufferCursor(target)\n    writer.copy(firstOp)\n\n    while (!reader.eof()) {\n      writer.copy(readOp(reader, source))\n    }\n\n    const tell = writer.tell()\n    if (targetSize !== tell) {\n      throw new InternalError(\n        `applyDelta expected target buffer to be ${targetSize} bytes but the resulting buffer was ${tell} bytes`\n      )\n    }\n  }\n  return target\n}\n\nfunction readVarIntLE(reader) {\n  let result = 0\n  let shift = 0\n  let byte = null\n  do {\n    byte = reader.readUInt8()\n    result |= (byte & 0b01111111) << shift\n    shift += 7\n  } while (byte & 0b10000000)\n  return result\n}\n\nfunction readCompactLE(reader, flags, size) {\n  let result = 0\n  let shift = 0\n  while (size--) {\n    if (flags & 0b00000001) {\n      result |= reader.readUInt8() << shift\n    }\n    flags >>= 1\n    shift += 8\n  }\n  return result\n}\n\nfunction readOp(reader, source) {\n  /** @type {number} */\n  const byte = reader.readUInt8()\n  const COPY = 0b10000000\n  const OFFS = 0b00001111\n  const SIZE = 0b01110000\n  if (byte & COPY) {\n    // copy consists of 4 byte offset, 3 byte size (in LE order)\n    const offset = readCompactLE(reader, byte & OFFS, 4)\n    let size = readCompactLE(reader, (byte & SIZE) >> 4, 3)\n    // Yup. They really did this optimization.\n    if (size === 0) size = 0x10000\n    return source.slice(offset, offset + size)\n  } else {\n    // insert\n    return reader.slice(byte)\n  }\n}\n","// My version of git-list-pack - roughly 15x faster than the original\n// It's used slightly differently - instead of returning a through stream it wraps a stream.\n// (I tried to make it API identical, but that ended up being 2x slower than this version.)\nimport pako from 'pako'\n\nimport { InternalError } from '../errors/InternalError.js'\nimport { StreamReader } from '../utils/StreamReader.js'\n\nexport async function listpack(stream, onData) {\n  const reader = new StreamReader(stream)\n  let PACK = await reader.read(4)\n  PACK = PACK.toString('utf8')\n  if (PACK !== 'PACK') {\n    throw new InternalError(`Invalid PACK header '${PACK}'`)\n  }\n\n  let version = await reader.read(4)\n  version = version.readUInt32BE(0)\n  if (version !== 2) {\n    throw new InternalError(`Invalid packfile version: ${version}`)\n  }\n\n  let numObjects = await reader.read(4)\n  numObjects = numObjects.readUInt32BE(0)\n  // If (for some godforsaken reason) this is an empty packfile, abort now.\n  if (numObjects < 1) return\n\n  while (!reader.eof() && numObjects--) {\n    const offset = reader.tell()\n    const { type, length, ofs, reference } = await parseHeader(reader)\n    const inflator = new pako.Inflate()\n    while (!inflator.result) {\n      const chunk = await reader.chunk()\n      if (!chunk) break\n      inflator.push(chunk, false)\n      if (inflator.err) {\n        throw new InternalError(`Pako error: ${inflator.msg}`)\n      }\n      if (inflator.result) {\n        if (inflator.result.length !== length) {\n          throw new InternalError(\n            `Inflated object size is different from that stated in packfile.`\n          )\n        }\n\n        // Backtrack parser to where deflated data ends\n        await reader.undo()\n        await reader.read(chunk.length - inflator.strm.avail_in)\n        const end = reader.tell()\n        await onData({\n          data: inflator.result,\n          type,\n          num: numObjects,\n          offset,\n          end,\n          reference,\n          ofs,\n        })\n      }\n    }\n  }\n}\n\nasync function parseHeader(reader) {\n  // Object type is encoded in bits 654\n  let byte = await reader.byte()\n  const type = (byte >> 4) & 0b111\n  // The length encoding get complicated.\n  // Last four bits of length is encoded in bits 3210\n  let length = byte & 0b1111\n  // Whether the next byte is part of the variable-length encoded number\n  // is encoded in bit 7\n  if (byte & 0b10000000) {\n    let shift = 4\n    do {\n      byte = await reader.byte()\n      length |= (byte & 0b01111111) << shift\n      shift += 7\n    } while (byte & 0b10000000)\n  }\n  // Handle deltified objects\n  let ofs\n  let reference\n  if (type === 6) {\n    let shift = 0\n    ofs = 0\n    const bytes = []\n    do {\n      byte = await reader.byte()\n      ofs |= (byte & 0b01111111) << shift\n      shift += 7\n      bytes.push(byte)\n    } while (byte & 0b10000000)\n    reference = Buffer.from(bytes)\n  }\n  if (type === 7) {\n    const buf = await reader.read(20)\n    reference = buf\n  }\n  return { type, length, ofs, reference }\n}\n","/* eslint-env node, browser */\n/* global DecompressionStream */\nimport pako from 'pako'\n\nlet supportsDecompressionStream = false\n\nexport async function inflate(buffer) {\n  if (supportsDecompressionStream === null) {\n    supportsDecompressionStream = testDecompressionStream()\n  }\n  return supportsDecompressionStream\n    ? browserInflate(buffer)\n    : pako.inflate(buffer)\n}\n\nasync function browserInflate(buffer) {\n  const ds = new DecompressionStream('deflate')\n  const d = new Blob([buffer]).stream().pipeThrough(ds)\n  return new Uint8Array(await new Response(d).arrayBuffer())\n}\n\nfunction testDecompressionStream() {\n  try {\n    const ds = new DecompressionStream('deflate')\n    if (ds) return true\n  } catch (_) {\n    // no bother\n  }\n  return false\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","var Buffer = require('safe-buffer').Buffer\n\n// prototype class for hash functions\nfunction Hash (blockSize, finalSize) {\n  this._block = Buffer.alloc(blockSize)\n  this._finalSize = finalSize\n  this._blockSize = blockSize\n  this._len = 0\n}\n\nHash.prototype.update = function (data, enc) {\n  if (typeof data === 'string') {\n    enc = enc || 'utf8'\n    data = Buffer.from(data, enc)\n  }\n\n  var block = this._block\n  var blockSize = this._blockSize\n  var length = data.length\n  var accum = this._len\n\n  for (var offset = 0; offset < length;) {\n    var assigned = accum % blockSize\n    var remainder = Math.min(length - offset, blockSize - assigned)\n\n    for (var i = 0; i < remainder; i++) {\n      block[assigned + i] = data[offset + i]\n    }\n\n    accum += remainder\n    offset += remainder\n\n    if ((accum % blockSize) === 0) {\n      this._update(block)\n    }\n  }\n\n  this._len += length\n  return this\n}\n\nHash.prototype.digest = function (enc) {\n  var rem = this._len % this._blockSize\n\n  this._block[rem] = 0x80\n\n  // zero (rem + 1) trailing bits, where (rem + 1) is the smallest\n  // non-negative solution to the equation (length + 1 + (rem + 1)) === finalSize mod blockSize\n  this._block.fill(0, rem + 1)\n\n  if (rem >= this._finalSize) {\n    this._update(this._block)\n    this._block.fill(0)\n  }\n\n  var bits = this._len * 8\n\n  // uint32\n  if (bits <= 0xffffffff) {\n    this._block.writeUInt32BE(bits, this._blockSize - 4)\n\n  // uint64\n  } else {\n    var lowBits = (bits & 0xffffffff) >>> 0\n    var highBits = (bits - lowBits) / 0x100000000\n\n    this._block.writeUInt32BE(highBits, this._blockSize - 8)\n    this._block.writeUInt32BE(lowBits, this._blockSize - 4)\n  }\n\n  this._update(this._block)\n  var hash = this._hash()\n\n  return enc ? hash.toString(enc) : hash\n}\n\nHash.prototype._update = function () {\n  throw new Error('_update must be implemented by subclass')\n}\n\nmodule.exports = Hash\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha1 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha1, Hash)\n\nSha1.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl1 (num) {\n  return (num << 1) | (num >>> 31)\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha1.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = rotl1(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16])\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha1.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha1\n","export function toHex(buffer) {\n  let hex = ''\n  for (const byte of new Uint8Array(buffer)) {\n    if (byte < 16) hex += '0'\n    hex += byte.toString(16)\n  }\n  return hex\n}\n","/* eslint-env node, browser */\nimport Hash from 'sha.js/sha1.js'\n\nimport { toHex } from './toHex.js'\n\nlet supportsSubtleSHA1 = null\n\nexport async function shasum(buffer) {\n  if (supportsSubtleSHA1 === null) {\n    supportsSubtleSHA1 = await testSubtleSHA1()\n  }\n  return supportsSubtleSHA1 ? subtleSHA1(buffer) : shasumSync(buffer)\n}\n\n// This is modeled after @dominictarr's \"shasum\" module,\n// but without the 'json-stable-stringify' dependency and\n// extra type-casting features.\nfunction shasumSync(buffer) {\n  return new Hash().update(buffer).digest('hex')\n}\n\nasync function subtleSHA1(buffer) {\n  const hash = await crypto.subtle.digest('SHA-1', buffer)\n  return toHex(hash)\n}\n\nasync function testSubtleSHA1() {\n  // I'm using a rather crude method of progressive enhancement, because\n  // some browsers that have crypto.subtle.digest don't actually implement SHA-1.\n  try {\n    const hash = await subtleSHA1(new Uint8Array([]))\n    if (hash === 'da39a3ee5e6b4b0d3255bfef95601890afd80709') return true\n  } catch (_) {\n    // no bother\n  }\n  return false\n}\n","import crc32 from 'crc-32'\n\nimport { InternalError } from '../errors/InternalError.js'\nimport { GitObject } from '../models/GitObject'\nimport { BufferCursor } from '../utils/BufferCursor.js'\nimport { applyDelta } from '../utils/applyDelta.js'\nimport { listpack } from '../utils/git-list-pack.js'\nimport { inflate } from '../utils/inflate.js'\nimport { shasum } from '../utils/shasum.js'\n\nfunction decodeVarInt(reader) {\n  const bytes = []\n  let byte = 0\n  let multibyte = 0\n  do {\n    byte = reader.readUInt8()\n    // We keep bits 6543210\n    const lastSeven = byte & 0b01111111\n    bytes.push(lastSeven)\n    // Whether the next byte is part of the variable-length encoded number\n    // is encoded in bit 7\n    multibyte = byte & 0b10000000\n  } while (multibyte)\n  // Now that all the bytes are in big-endian order,\n  // alternate shifting the bits left by 7 and OR-ing the next byte.\n  // And... do a weird increment-by-one thing that I don't quite understand.\n  return bytes.reduce((a, b) => ((a + 1) << 7) | b, -1)\n}\n\n// I'm pretty much copying this one from the git C source code,\n// because it makes no sense.\nfunction otherVarIntDecode(reader, startWith) {\n  let result = startWith\n  let shift = 4\n  let byte = null\n  do {\n    byte = reader.readUInt8()\n    result |= (byte & 0b01111111) << shift\n    shift += 7\n  } while (byte & 0b10000000)\n  return result\n}\n\nexport class GitPackIndex {\n  constructor(stuff) {\n    Object.assign(this, stuff)\n    this.offsetCache = {}\n  }\n\n  static async fromIdx({ idx, getExternalRefDelta }) {\n    const reader = new BufferCursor(idx)\n    const magic = reader.slice(4).toString('hex')\n    // Check for IDX v2 magic number\n    if (magic !== 'ff744f63') {\n      return // undefined\n    }\n    const version = reader.readUInt32BE()\n    if (version !== 2) {\n      throw new InternalError(\n        `Unable to read version ${version} packfile IDX. (Only version 2 supported)`\n      )\n    }\n    if (idx.byteLength > 2048 * 1024 * 1024) {\n      throw new InternalError(\n        `To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.`\n      )\n    }\n    // Skip over fanout table\n    reader.seek(reader.tell() + 4 * 255)\n    // Get hashes\n    const size = reader.readUInt32BE()\n    const hashes = []\n    for (let i = 0; i < size; i++) {\n      const hash = reader.slice(20).toString('hex')\n      hashes[i] = hash\n    }\n    reader.seek(reader.tell() + 4 * size)\n    // Skip over CRCs\n    // Get offsets\n    const offsets = new Map()\n    for (let i = 0; i < size; i++) {\n      offsets.set(hashes[i], reader.readUInt32BE())\n    }\n    const packfileSha = reader.slice(20).toString('hex')\n    return new GitPackIndex({\n      hashes,\n      crcs: {},\n      offsets,\n      packfileSha,\n      getExternalRefDelta,\n    })\n  }\n\n  static async fromPack({ pack, getExternalRefDelta, onProgress }) {\n    const listpackTypes = {\n      1: 'commit',\n      2: 'tree',\n      3: 'blob',\n      4: 'tag',\n      6: 'ofs-delta',\n      7: 'ref-delta',\n    }\n    const offsetToObject = {}\n\n    // Older packfiles do NOT use the shasum of the pack itself,\n    // so it is recommended to just use whatever bytes are in the trailer.\n    // Source: https://github.com/git/git/commit/1190a1acf800acdcfd7569f87ac1560e2d077414\n    const packfileSha = pack.slice(-20).toString('hex')\n\n    const hashes = []\n    const crcs = {}\n    const offsets = new Map()\n    let totalObjectCount = null\n    let lastPercent = null\n\n    await listpack([pack], async ({ data, type, reference, offset, num }) => {\n      if (totalObjectCount === null) totalObjectCount = num\n      const percent = Math.floor(\n        ((totalObjectCount - num) * 100) / totalObjectCount\n      )\n      if (percent !== lastPercent) {\n        if (onProgress) {\n          await onProgress({\n            phase: 'Receiving objects',\n            loaded: totalObjectCount - num,\n            total: totalObjectCount,\n          })\n        }\n      }\n      lastPercent = percent\n      // Change type from a number to a meaningful string\n      type = listpackTypes[type]\n\n      if (['commit', 'tree', 'blob', 'tag'].includes(type)) {\n        offsetToObject[offset] = {\n          type,\n          offset,\n        }\n      } else if (type === 'ofs-delta') {\n        offsetToObject[offset] = {\n          type,\n          offset,\n        }\n      } else if (type === 'ref-delta') {\n        offsetToObject[offset] = {\n          type,\n          offset,\n        }\n      }\n    })\n\n    // We need to know the lengths of the slices to compute the CRCs.\n    const offsetArray = Object.keys(offsetToObject).map(Number)\n    for (const [i, start] of offsetArray.entries()) {\n      const end =\n        i + 1 === offsetArray.length ? pack.byteLength - 20 : offsetArray[i + 1]\n      const o = offsetToObject[start]\n      const crc = crc32.buf(pack.slice(start, end)) >>> 0\n      o.end = end\n      o.crc = crc\n    }\n\n    // We don't have the hashes yet. But we can generate them using the .readSlice function!\n    const p = new GitPackIndex({\n      pack: Promise.resolve(pack),\n      packfileSha,\n      crcs,\n      hashes,\n      offsets,\n      getExternalRefDelta,\n    })\n\n    // Resolve deltas and compute the oids\n    lastPercent = null\n    let count = 0\n    const objectsByDepth = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    for (let offset in offsetToObject) {\n      offset = Number(offset)\n      const percent = Math.floor((count * 100) / totalObjectCount)\n      if (percent !== lastPercent) {\n        if (onProgress) {\n          await onProgress({\n            phase: 'Resolving deltas',\n            loaded: count,\n            total: totalObjectCount,\n          })\n        }\n      }\n      count++\n      lastPercent = percent\n\n      const o = offsetToObject[offset]\n      if (o.oid) continue\n      try {\n        p.readDepth = 0\n        p.externalReadDepth = 0\n        const { type, object } = await p.readSlice({ start: offset })\n        objectsByDepth[p.readDepth] += 1\n        const oid = await shasum(GitObject.wrap({ type, object }))\n        o.oid = oid\n        hashes.push(oid)\n        offsets.set(oid, offset)\n        crcs[oid] = o.crc\n      } catch (err) {\n        continue\n      }\n    }\n\n    hashes.sort()\n    return p\n  }\n\n  async toBuffer() {\n    const buffers = []\n    const write = (str, encoding) => {\n      buffers.push(Buffer.from(str, encoding))\n    }\n    // Write out IDX v2 magic number\n    write('ff744f63', 'hex')\n    // Write out version number 2\n    write('00000002', 'hex')\n    // Write fanout table\n    const fanoutBuffer = new BufferCursor(Buffer.alloc(256 * 4))\n    for (let i = 0; i < 256; i++) {\n      let count = 0\n      for (const hash of this.hashes) {\n        if (parseInt(hash.slice(0, 2), 16) <= i) count++\n      }\n      fanoutBuffer.writeUInt32BE(count)\n    }\n    buffers.push(fanoutBuffer.buffer)\n    // Write out hashes\n    for (const hash of this.hashes) {\n      write(hash, 'hex')\n    }\n    // Write out crcs\n    const crcsBuffer = new BufferCursor(Buffer.alloc(this.hashes.length * 4))\n    for (const hash of this.hashes) {\n      crcsBuffer.writeUInt32BE(this.crcs[hash])\n    }\n    buffers.push(crcsBuffer.buffer)\n    // Write out offsets\n    const offsetsBuffer = new BufferCursor(Buffer.alloc(this.hashes.length * 4))\n    for (const hash of this.hashes) {\n      offsetsBuffer.writeUInt32BE(this.offsets.get(hash))\n    }\n    buffers.push(offsetsBuffer.buffer)\n    // Write out packfile checksum\n    write(this.packfileSha, 'hex')\n    // Write out shasum\n    const totalBuffer = Buffer.concat(buffers)\n    const sha = await shasum(totalBuffer)\n    const shaBuffer = Buffer.alloc(20)\n    shaBuffer.write(sha, 'hex')\n    return Buffer.concat([totalBuffer, shaBuffer])\n  }\n\n  async load({ pack }) {\n    this.pack = pack\n  }\n\n  async unload() {\n    this.pack = null\n  }\n\n  async read({ oid }) {\n    if (!this.offsets.get(oid)) {\n      if (this.getExternalRefDelta) {\n        this.externalReadDepth++\n        return this.getExternalRefDelta(oid)\n      } else {\n        throw new InternalError(`Could not read object ${oid} from packfile`)\n      }\n    }\n    const start = this.offsets.get(oid)\n    return this.readSlice({ start })\n  }\n\n  async readSlice({ start }) {\n    if (this.offsetCache[start]) {\n      return Object.assign({}, this.offsetCache[start])\n    }\n    this.readDepth++\n    const types = {\n      0b0010000: 'commit',\n      0b0100000: 'tree',\n      0b0110000: 'blob',\n      0b1000000: 'tag',\n      0b1100000: 'ofs_delta',\n      0b1110000: 'ref_delta',\n    }\n    if (!this.pack) {\n      throw new InternalError(\n        'Tried to read from a GitPackIndex with no packfile loaded into memory'\n      )\n    }\n    const raw = (await this.pack).slice(start)\n    const reader = new BufferCursor(raw)\n    const byte = reader.readUInt8()\n    // Object type is encoded in bits 654\n    const btype = byte & 0b1110000\n    let type = types[btype]\n    if (type === undefined) {\n      throw new InternalError('Unrecognized type: 0b' + btype.toString(2))\n    }\n    // The length encoding get complicated.\n    // Last four bits of length is encoded in bits 3210\n    const lastFour = byte & 0b1111\n    let length = lastFour\n    // Whether the next byte is part of the variable-length encoded number\n    // is encoded in bit 7\n    const multibyte = byte & 0b10000000\n    if (multibyte) {\n      length = otherVarIntDecode(reader, lastFour)\n    }\n    let base = null\n    let object = null\n    // Handle deltified objects\n    if (type === 'ofs_delta') {\n      const offset = decodeVarInt(reader)\n      const baseOffset = start - offset\n      ;({ object: base, type } = await this.readSlice({ start: baseOffset }))\n    }\n    if (type === 'ref_delta') {\n      const oid = reader.slice(20).toString('hex')\n      ;({ object: base, type } = await this.read({ oid }))\n    }\n    // Handle undeltified objects\n    const buffer = raw.slice(reader.tell())\n    object = Buffer.from(await inflate(buffer))\n    // Assert that the object length is as expected.\n    if (object.byteLength !== length) {\n      throw new InternalError(\n        `Packfile told us object would have length ${length} but it had length ${object.byteLength}`\n      )\n    }\n    if (base) {\n      object = Buffer.from(applyDelta(object, base))\n    }\n    // Cache the result based on depth.\n    if (this.readDepth > 3) {\n      // hand tuned for speed / memory usage tradeoff\n      this.offsetCache[start] = { type, object }\n    }\n    return { type, format: 'content', object }\n  }\n}\n","import { BaseError } from './BaseError.js'\n\nexport class InvalidOidError extends BaseError {\n  /**\n   * @param {string} value\n   */\n  constructor(value) {\n    super(`Expected a 40-char hex object id but saw \"${value}\".`)\n    this.code = this.name = InvalidOidError.code\n    this.data = { value }\n  }\n}\n/** @type {'InvalidOidError'} */\nInvalidOidError.code = 'InvalidOidError'\n","import { BaseError } from './BaseError.js'\n\nexport class ObjectTypeError extends BaseError {\n  /**\n   * @param {string} oid\n   * @param {'blob'|'commit'|'tag'|'tree'} actual\n   * @param {'blob'|'commit'|'tag'|'tree'} expected\n   * @param {string} [filepath]\n   */\n  constructor(oid, actual, expected, filepath) {\n    super(\n      `Object ${oid} ${\n        filepath ? `at ${filepath}` : ''\n      }was anticipated to be a ${expected} but it is a ${actual}.`\n    )\n    this.code = this.name = ObjectTypeError.code\n    this.data = { oid, actual, expected, filepath }\n  }\n}\n/** @type {'ObjectTypeError'} */\nObjectTypeError.code = 'ObjectTypeError'\n","import { getIterator } from './getIterator.js'\n\n// Currently 'for await' upsets my linters.\nexport async function forAwait(iterable, cb) {\n  const iter = getIterator(iterable)\n  while (true) {\n    const { value, done } = await iter.next()\n    if (value) await cb(value)\n    if (done) break\n  }\n  if (iter.return) iter.return()\n}\n","import { forAwait } from './forAwait.js'\n\nexport async function collect(iterable) {\n  let size = 0\n  const buffers = []\n  // This will be easier once `for await ... of` loops are available.\n  await forAwait(iterable, value => {\n    buffers.push(value)\n    size += value.byteLength\n  })\n  const result = new Uint8Array(size)\n  let nextIndex = 0\n  for (const buffer of buffers) {\n    result.set(buffer, nextIndex)\n    nextIndex += buffer.byteLength\n  }\n  return result\n}\n","export class FIFO {\n  constructor() {\n    this._queue = []\n  }\n\n  write(chunk) {\n    if (this._ended) {\n      throw Error('You cannot write to a FIFO that has already been ended!')\n    }\n    if (this._waiting) {\n      const resolve = this._waiting\n      this._waiting = null\n      resolve({ value: chunk })\n    } else {\n      this._queue.push(chunk)\n    }\n  }\n\n  end() {\n    this._ended = true\n    if (this._waiting) {\n      const resolve = this._waiting\n      this._waiting = null\n      resolve({ done: true })\n    }\n  }\n\n  destroy(err) {\n    this.error = err\n    this.end()\n  }\n\n  async next() {\n    if (this._queue.length > 0) {\n      return { value: this._queue.shift() }\n    }\n    if (this._ended) {\n      return { done: true }\n    }\n    if (this._waiting) {\n      throw Error(\n        'You cannot call read until the previous call to read has returned!'\n      )\n    }\n    return new Promise(resolve => {\n      this._waiting = resolve\n    })\n  }\n}\n","/*\nIf 'side-band' or 'side-band-64k' capabilities have been specified by\nthe client, the server will send the packfile data multiplexed.\n\nEach packet starting with the packet-line length of the amount of data\nthat follows, followed by a single byte specifying the sideband the\nfollowing data is coming in on.\n\nIn 'side-band' mode, it will send up to 999 data bytes plus 1 control\ncode, for a total of up to 1000 bytes in a pkt-line.  In 'side-band-64k'\nmode it will send up to 65519 data bytes plus 1 control code, for a\ntotal of up to 65520 bytes in a pkt-line.\n\nThe sideband byte will be a '1', '2' or a '3'. Sideband '1' will contain\npackfile data, sideband '2' will be used for progress information that the\nclient will generally print to stderr and sideband '3' is used for error\ninformation.\n\nIf no 'side-band' capability was specified, the server will stream the\nentire packfile without multiplexing.\n*/\nimport { FIFO } from '../utils/FIFO.js'\n\nimport { GitPktLine } from './GitPktLine.js'\n\nexport class GitSideBand {\n  static demux(input) {\n    const read = GitPktLine.streamReader(input)\n    // And now for the ridiculous side-band or side-band-64k protocol\n    const packetlines = new FIFO()\n    const packfile = new FIFO()\n    const progress = new FIFO()\n    // TODO: Use a proper through stream?\n    const nextBit = async function() {\n      const line = await read()\n      // Skip over flush packets\n      if (line === null) return nextBit()\n      // A made up convention to signal there's no more to read.\n      if (line === true) {\n        packetlines.end()\n        progress.end()\n        input.error ? packfile.destroy(input.error) : packfile.end()\n        return\n      }\n      // Examine first byte to determine which output \"stream\" to use\n      switch (line[0]) {\n        case 1: {\n          // pack data\n          packfile.write(line.slice(1))\n          break\n        }\n        case 2: {\n          // progress message\n          progress.write(line.slice(1))\n          break\n        }\n        case 3: {\n          // fatal error message just before stream aborts\n          const error = line.slice(1)\n          progress.write(error)\n          packetlines.end()\n          progress.end()\n          packfile.destroy(new Error(error.toString('utf8')))\n          return\n        }\n        default: {\n          // Not part of the side-band-64k protocol\n          packetlines.write(line)\n        }\n      }\n      // Careful not to blow up the stack.\n      // I think Promises in a tail-call position should be OK.\n      nextBit()\n    }\n    nextBit()\n    return {\n      packetlines,\n      packfile,\n      progress,\n    }\n  }\n  // static mux ({\n  //   protocol, // 'side-band' or 'side-band-64k'\n  //   packetlines,\n  //   packfile,\n  //   progress,\n  //   error\n  // }) {\n  //   const MAX_PACKET_LENGTH = protocol === 'side-band-64k' ? 999 : 65519\n  //   let output = new PassThrough()\n  //   packetlines.on('data', data => {\n  //     if (data === null) {\n  //       output.write(GitPktLine.flush())\n  //     } else {\n  //       output.write(GitPktLine.encode(data))\n  //     }\n  //   })\n  //   let packfileWasEmpty = true\n  //   let packfileEnded = false\n  //   let progressEnded = false\n  //   let errorEnded = false\n  //   let goodbye = Buffer.concat([\n  //     GitPktLine.encode(Buffer.from('010A', 'hex')),\n  //     GitPktLine.flush()\n  //   ])\n  //   packfile\n  //     .on('data', data => {\n  //       packfileWasEmpty = false\n  //       const buffers = splitBuffer(data, MAX_PACKET_LENGTH)\n  //       for (const buffer of buffers) {\n  //         output.write(\n  //           GitPktLine.encode(Buffer.concat([Buffer.from('01', 'hex'), buffer]))\n  //         )\n  //       }\n  //     })\n  //     .on('end', () => {\n  //       packfileEnded = true\n  //       if (!packfileWasEmpty) output.write(goodbye)\n  //       if (progressEnded && errorEnded) output.end()\n  //     })\n  //   progress\n  //     .on('data', data => {\n  //       const buffers = splitBuffer(data, MAX_PACKET_LENGTH)\n  //       for (const buffer of buffers) {\n  //         output.write(\n  //           GitPktLine.encode(Buffer.concat([Buffer.from('02', 'hex'), buffer]))\n  //         )\n  //       }\n  //     })\n  //     .on('end', () => {\n  //       progressEnded = true\n  //       if (packfileEnded && errorEnded) output.end()\n  //     })\n  //   error\n  //     .on('data', data => {\n  //       const buffers = splitBuffer(data, MAX_PACKET_LENGTH)\n  //       for (const buffer of buffers) {\n  //         output.write(\n  //           GitPktLine.encode(Buffer.concat([Buffer.from('03', 'hex'), buffer]))\n  //         )\n  //       }\n  //     })\n  //     .on('end', () => {\n  //       errorEnded = true\n  //       if (progressEnded && packfileEnded) output.end()\n  //     })\n  //   return output\n  // }\n}\n","import { InvalidOidError } from '../errors/InvalidOidError.js'\nimport { GitSideBand } from '../models/GitSideBand.js'\nimport { forAwait } from '../utils/forAwait.js'\n\nexport async function parseUploadPackResponse(stream) {\n  const { packetlines, packfile, progress } = GitSideBand.demux(stream)\n  const shallows = []\n  const unshallows = []\n  const acks = []\n  let nak = false\n  let done = false\n  return new Promise((resolve, reject) => {\n    // Parse the response\n    forAwait(packetlines, data => {\n      const line = data.toString('utf8').trim()\n      if (line.startsWith('shallow')) {\n        const oid = line.slice(-41).trim()\n        if (oid.length !== 40) {\n          reject(new InvalidOidError(oid))\n        }\n        shallows.push(oid)\n      } else if (line.startsWith('unshallow')) {\n        const oid = line.slice(-41).trim()\n        if (oid.length !== 40) {\n          reject(new InvalidOidError(oid))\n        }\n        unshallows.push(oid)\n      } else if (line.startsWith('ACK')) {\n        const [, oid, status] = line.split(' ')\n        acks.push({ oid, status })\n        if (!status) done = true\n      } else if (line.startsWith('NAK')) {\n        nak = true\n        done = true\n      } else {\n        done = true\n        nak = true\n      }\n      if (done) {\n        stream.error\n          ? reject(stream.error)\n          : resolve({ shallows, unshallows, acks, nak, packfile, progress })\n      }\n    }).finally(() => {\n      if (!done) {\n        stream.error\n          ? reject(stream.error)\n          : resolve({ shallows, unshallows, acks, nak, packfile, progress })\n      }\n    })\n  })\n}\n","/*\n * Import internal data parsers and structures from isomorphic-git. These\n * exports are not available in the npm version of isomorphic-git, which is why\n * we use one from the git repository.\n *\n * This file heavily relies on isomorphic-git internals to parse Git data formats\n * such as PACK, trees, deltas, etc.\n */\nimport './isomorphic-git.d.ts';\nimport { GitPktLine } from 'isomorphic-git/src/models/GitPktLine.js';\nimport { GitTree } from 'isomorphic-git/src/models/GitTree.js';\nimport { GitAnnotatedTag } from 'isomorphic-git/src/models/GitAnnotatedTag.js';\nimport { GitCommit } from 'isomorphic-git/src/models/GitCommit.js';\nimport { GitPackIndex } from 'isomorphic-git/src/models/GitPackIndex.js';\nimport { collect } from 'isomorphic-git/src/internal-apis.js';\nimport { parseUploadPackResponse } from 'isomorphic-git/src/wire/parseUploadPackResponse.js';\nimport { ObjectTypeError } from 'isomorphic-git/src/errors/ObjectTypeError.js';\nimport { Buffer } from 'buffer';\n\n/**\n * A polyfill for the Buffer class. We need it because isomorphic-git uses it internally.\n * The isomorphic-git version released via npm shipes a Buffer implementation, but we're\n * using a version cloned from the git repository which assumes a global Buffer is available.\n */\nif (typeof window !== 'undefined') {\n\twindow.Buffer = Buffer;\n}\n\n/**\n * Downloads specific files from a git repository.\n * It uses the git protocol over HTTP to fetch the files. It only uses\n * three HTTP requests regardless of the number of paths requested.\n *\n * @param repoUrl The URL of the git repository.\n * @param fullyQualifiedBranchName The full name of the branch to fetch from (e.g., 'refs/heads/main').\n * @param filesPaths An array of all the file paths to fetch from the repository. Does **not** accept\n *                   patterns, wildcards, directory paths. All files must be explicitly listed.\n * @returns A record where keys are file paths and values are the retrieved file contents.\n */\nexport async function sparseCheckout(\n\trepoUrl: string,\n\tcommitHash: string,\n\tfilesPaths: string[]\n) {\n\tconst treesIdx = await fetchWithoutBlobs(repoUrl, commitHash);\n\tconst objects = await resolveObjects(treesIdx, commitHash, filesPaths);\n\n\tconst blobsIdx = await fetchObjects(\n\t\trepoUrl,\n\t\tfilesPaths.map((path) => objects[path].oid)\n\t);\n\n\tconst fetchedPaths: Record<string, any> = {};\n\tawait Promise.all(\n\t\tfilesPaths.map(async (path) => {\n\t\t\tfetchedPaths[path] = await extractGitObjectFromIdx(\n\t\t\t\tblobsIdx,\n\t\t\t\tobjects[path].oid\n\t\t\t);\n\t\t})\n\t);\n\treturn fetchedPaths;\n}\n\nexport type GitFileTreeFile = {\n\tname: string;\n\ttype: 'file';\n};\nexport type GitFileTreeFolder = {\n\tname: string;\n\ttype: 'folder';\n\tchildren: GitFileTree[];\n};\nexport type GitFileTree = GitFileTreeFile | GitFileTreeFolder;\n\nexport type GitRef = {\n\tvalue: string;\n\ttype?: 'branch' | 'commit' | 'refname' | 'infer';\n};\n\n/**\n * Lists all files in a git repository.\n *\n * See https://git-scm.com/book/en/v2/Git-Internals-Git-Objects for more information.\n *\n * @param repoUrl The URL of the git repository.\n * @param commitHash The commit hash to fetch from.\n * @returns A list of all files in the repository.\n */\nexport async function listGitFiles(\n\trepoUrl: string,\n\tcommitHash: string\n): Promise<GitFileTree[]> {\n\tconst treesIdx = await fetchWithoutBlobs(repoUrl, commitHash);\n\tconst rootTree = await resolveAllObjects(treesIdx, commitHash);\n\tif (!rootTree?.object) {\n\t\treturn [];\n\t}\n\n\treturn gitTreeToFileTree(rootTree);\n}\n\n/**\n * Resolves a ref description, e.g. a branch name, to a commit hash.\n *\n * @param repoUrl The URL of the git repository.\n * @param ref The branch name or commit hash.\n * @returns The commit hash.\n */\nexport async function resolveCommitHash(repoUrl: string, ref: GitRef) {\n\tif (ref.type === 'infer' || ref.type === undefined) {\n\t\tif (['', 'HEAD'].includes(ref.value)) {\n\t\t\tref = {\n\t\t\t\tvalue: ref.value,\n\t\t\t\ttype: 'refname',\n\t\t\t};\n\t\t} else if (typeof ref.value === 'string' && ref.value.length === 40) {\n\t\t\tref = {\n\t\t\t\tvalue: ref.value,\n\t\t\t\ttype: 'commit',\n\t\t\t};\n\t\t}\n\t}\n\tif (ref.type === 'branch') {\n\t\tref = {\n\t\t\tvalue: `refs/heads/${ref.value}`,\n\t\t\ttype: 'refname',\n\t\t};\n\t}\n\tswitch (ref.type) {\n\t\tcase 'commit':\n\t\t\treturn ref.value;\n\t\tcase 'refname': {\n\t\t\tconst refs = await listGitRefs(repoUrl, ref.value);\n\t\t\tif (!(ref.value in refs)) {\n\t\t\t\tthrow new Error(`Branch ${ref.value} not found`);\n\t\t\t}\n\t\t\treturn refs[ref.value];\n\t\t}\n\t\tdefault:\n\t\t\tthrow new Error(`Invalid ref type: ${ref.type}`);\n\t}\n}\n\nfunction gitTreeToFileTree(tree: GitTree): GitFileTree[] {\n\treturn tree.object\n\t\t.map((branch) => {\n\t\t\tif (branch.type === 'blob') {\n\t\t\t\treturn {\n\t\t\t\t\tname: branch.path,\n\t\t\t\t\ttype: 'file',\n\t\t\t\t} as GitFileTreeFile;\n\t\t\t} else if (branch.type === 'tree' && branch.object) {\n\t\t\t\treturn {\n\t\t\t\t\tname: branch.path,\n\t\t\t\t\ttype: 'folder',\n\t\t\t\t\tchildren: gitTreeToFileTree(branch as any as GitTree),\n\t\t\t\t} as GitFileTreeFolder;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t})\n\t\t.filter((entry) => !!entry?.name) as GitFileTree[];\n}\n\n/**\n * Retrieves a list of refs from a git repository.\n *\n * See https://git-scm.com/book/en/v2/Git-Internals-Git-References for more information.\n *\n * @param repoUrl The URL of the git repository. For example: https://github.com/WordPress/gutenberg.git\n * @param fullyQualifiedBranchPrefix The prefix of the refs to fetch. For example: refs/heads/my-feature-branch\n * @returns A map of refs to their corresponding commit hashes.\n */\nexport async function listGitRefs(\n\trepoUrl: string,\n\tfullyQualifiedBranchPrefix: string\n) {\n\tconst packbuffer = Buffer.from(\n\t\tawait collect([\n\t\t\tGitPktLine.encode(`command=ls-refs\\n`),\n\t\t\tGitPktLine.encode(`agent=git/2.37.3\\n`),\n\t\t\tGitPktLine.encode(`object-format=sha1\\n`),\n\t\t\tGitPktLine.delim(),\n\t\t\tGitPktLine.encode(`peel\\n`),\n\t\t\tGitPktLine.encode(`ref-prefix ${fullyQualifiedBranchPrefix}\\n`),\n\t\t\tGitPktLine.flush(),\n\t\t])\n\t);\n\n\tconst response = await fetch(repoUrl + '/git-upload-pack', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/x-git-upload-pack-advertisement',\n\t\t\t'content-type': 'application/x-git-upload-pack-request',\n\t\t\t'Content-Length': `${packbuffer.length}`,\n\t\t\t'Git-Protocol': 'version=2',\n\t\t},\n\t\tbody: packbuffer,\n\t});\n\n\tconst refs: Record<string, string> = {};\n\tfor await (const line of parseGitResponseLines(response)) {\n\t\tconst spaceAt = line.indexOf(' ');\n\t\tconst ref = line.slice(0, spaceAt);\n\t\tconst name = line.slice(spaceAt + 1, line.length - 1);\n\t\trefs[name] = ref;\n\t}\n\treturn refs;\n}\n\nasync function fetchWithoutBlobs(repoUrl: string, commitHash: string) {\n\tconst packbuffer = Buffer.from(\n\t\tawait collect([\n\t\t\tGitPktLine.encode(\n\t\t\t\t`want ${commitHash} multi_ack_detailed no-done side-band-64k thin-pack ofs-delta agent=git/2.37.3 filter \\n`\n\t\t\t),\n\t\t\tGitPktLine.encode(`filter blob:none\\n`),\n\t\t\tGitPktLine.encode(`shallow ${commitHash}\\n`),\n\t\t\tGitPktLine.encode(`deepen 1\\n`),\n\t\t\tGitPktLine.flush(),\n\t\t\tGitPktLine.encode(`done\\n`),\n\t\t\tGitPktLine.encode(`done\\n`),\n\t\t])\n\t);\n\n\tconst response = await fetch(repoUrl + '/git-upload-pack', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/x-git-upload-pack-advertisement',\n\t\t\t'content-type': 'application/x-git-upload-pack-request',\n\t\t\t'Content-Length': `${packbuffer.length}`,\n\t\t},\n\t\tbody: packbuffer,\n\t});\n\n\tconst iterator = streamToIterator(response.body!);\n\tconst parsed = await parseUploadPackResponse(iterator);\n\tconst packfile = Buffer.from(await collect(parsed.packfile));\n\tconst idx = await GitPackIndex.fromPack({\n\t\tpack: packfile,\n\t});\n\tconst originalRead = idx.read as any;\n\tidx.read = async function ({ oid, ...rest }: { oid: string }) {\n\t\tconst result = await originalRead.call(this, { oid, ...rest });\n\t\tresult.oid = oid;\n\t\treturn result;\n\t};\n\treturn idx;\n}\n\nasync function resolveAllObjects(idx: GitPackIndex, commitHash: string) {\n\tconst commit = await idx.read({\n\t\toid: commitHash,\n\t});\n\treadObject(commit);\n\n\tconst rootItem = await idx.read({ oid: commit.object.tree });\n\tconst items = [rootItem];\n\twhile (items.length > 0) {\n\t\tconst tree = items.pop();\n\t\tconst readItem = await idx.read({ oid: tree.oid });\n\t\treadObject(readItem);\n\t\ttree.object = readItem.object;\n\t\tif (readItem.type === 'tree') {\n\t\t\tfor (const subitem of readItem.object) {\n\t\t\t\tif (subitem.type === 'tree') {\n\t\t\t\t\titems.push(subitem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn rootItem;\n}\n\nasync function resolveObjects(\n\tidx: GitPackIndex,\n\tcommitHash: string,\n\tpaths: string[]\n) {\n\tconst commit = await idx.read({\n\t\toid: commitHash,\n\t});\n\treadObject(commit);\n\n\tconst rootTree = await idx.read({ oid: commit.object.tree });\n\treadObject(rootTree);\n\n\t// Resolve refs to fetch\n\tconst resolvedOids: Record<string, any> = {};\n\tfor (const path of paths) {\n\t\tlet currentObject = rootTree;\n\t\tconst segments = path.split('/');\n\t\tfor (const segment of segments) {\n\t\t\tif (currentObject.type !== 'tree') {\n\t\t\t\tthrow new Error(`Path not found in the repo: ${path}`);\n\t\t\t}\n\n\t\t\tlet found = false;\n\t\t\tfor (const item of currentObject.object) {\n\t\t\t\tif (item.path === segment) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcurrentObject = await idx.read({ oid: item.oid });\n\t\t\t\t\t\treadObject(currentObject);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tcurrentObject = item;\n\t\t\t\t\t}\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!found) {\n\t\t\t\tthrow new Error(`Path not found in the repo: ${path}`);\n\t\t\t}\n\t\t}\n\t\tresolvedOids[path] = currentObject;\n\t}\n\treturn resolvedOids;\n}\n\n// Request oid for each resolvedRef\nasync function fetchObjects(url: string, objectHashes: string[]) {\n\tconst packbuffer = Buffer.from(\n\t\tawait collect([\n\t\t\t...objectHashes.map((objectHash) =>\n\t\t\t\tGitPktLine.encode(\n\t\t\t\t\t`want ${objectHash} multi_ack_detailed no-done side-band-64k thin-pack ofs-delta agent=git/2.37.3 \\n`\n\t\t\t\t)\n\t\t\t),\n\t\t\tGitPktLine.flush(),\n\t\t\tGitPktLine.encode(`done\\n`),\n\t\t])\n\t);\n\n\tconst response = await fetch(url + '/git-upload-pack', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/x-git-upload-pack-advertisement',\n\t\t\t'content-type': 'application/x-git-upload-pack-request',\n\t\t\t'Content-Length': `${packbuffer.length}`,\n\t\t},\n\t\tbody: packbuffer,\n\t});\n\n\tconst iterator = streamToIterator(response.body!);\n\tconst parsed = await parseUploadPackResponse(iterator);\n\tconst packfile = Buffer.from(await collect(parsed.packfile));\n\treturn await GitPackIndex.fromPack({\n\t\tpack: packfile,\n\t});\n}\n\nasync function extractGitObjectFromIdx(idx: GitPackIndex, objectHash: string) {\n\tconst tree = await idx.read({ oid: objectHash });\n\treadObject(tree);\n\n\tif (tree.type === 'blob') {\n\t\treturn tree.object;\n\t}\n\n\tconst files: Record<string, any> = {};\n\tfor (const { path, oid, type } of tree.object) {\n\t\tif (type === 'blob') {\n\t\t\tconst object = await idx.read({ oid });\n\t\t\treadObject(object);\n\t\t\tfiles[path] = object.object;\n\t\t} else if (type === 'tree') {\n\t\t\tfiles[path] = await extractGitObjectFromIdx(idx, oid);\n\t\t}\n\t}\n\treturn files;\n}\n\nfunction readObject(result: any) {\n\tif (!(result.object instanceof Buffer)) {\n\t\treturn;\n\t}\n\tswitch (result.type) {\n\t\tcase 'commit':\n\t\t\tresult.object = GitCommit.from(result.object).parse();\n\t\t\tbreak;\n\t\tcase 'tree':\n\t\t\tresult.object = (GitTree.from(result.object) as any).entries();\n\t\t\tbreak;\n\t\tcase 'blob':\n\t\t\tresult.object = new Uint8Array(result.object);\n\t\t\tresult.format = 'content';\n\t\t\tbreak;\n\t\tcase 'tag':\n\t\t\tresult.object = GitAnnotatedTag.from(result.object).parse();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new ObjectTypeError(\n\t\t\t\tresult.oid,\n\t\t\t\tresult.type,\n\t\t\t\t'blob|commit|tag|tree'\n\t\t\t);\n\t}\n}\n\nasync function* parseGitResponseLines(response: Response) {\n\tconst text = await response.text();\n\tlet at = 0;\n\n\twhile (at <= text.length) {\n\t\tconst lineLength = parseInt(text.substring(at, at + 4), 16);\n\t\tif (lineLength === 0) {\n\t\t\tbreak;\n\t\t}\n\t\tconst line = text.substring(at + 4, at + lineLength);\n\t\tyield line;\n\t\tat += lineLength;\n\t}\n}\n\nfunction streamToIterator(stream: any) {\n\t// Use native async iteration if it's available.\n\tif (stream[Symbol.asyncIterator]) {\n\t\treturn stream;\n\t}\n\tconst reader = stream.getReader();\n\treturn {\n\t\tnext() {\n\t\t\treturn reader.read();\n\t\t},\n\t\treturn() {\n\t\t\treader.releaseLock();\n\t\t\treturn {};\n\t\t},\n\t\t[Symbol.asyncIterator]() {\n\t\t\treturn this;\n\t\t},\n\t};\n}\n","import { normalizePath } from '@php-wasm/util';\nimport type { GitFileTree } from './git-sparse-checkout';\n\nexport function listDescendantFiles(\n\tfiles: GitFileTree[],\n\tselectedPath: string\n) {\n\tselectedPath = normalizePath(selectedPath);\n\tconst isRoot = ['', '.', '/'].includes(selectedPath);\n\n\tlet currentTree: GitFileTree[] | null = files;\n\tif (isRoot) {\n\t\tselectedPath = '';\n\t} else {\n\t\tconst segments = selectedPath.split('/');\n\t\tfor (const segment of segments) {\n\t\t\tconst file = currentTree?.find(\n\t\t\t\t(file) => file.name === segment\n\t\t\t) as GitFileTree;\n\t\t\tif (file?.type === 'folder') {\n\t\t\t\tcurrentTree = file.children;\n\t\t\t} else if (file) {\n\t\t\t\treturn [file.name];\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t}\n\n\t// Calculate the list of files to checkout based on the mapping\n\tconst descendants: string[] = [];\n\tconst stack = [{ tree: currentTree, path: selectedPath }];\n\twhile (stack.length > 0) {\n\t\tconst { tree, path } = stack.pop() as {\n\t\t\ttree: GitFileTree[];\n\t\t\tpath: string;\n\t\t};\n\t\tfor (const file of tree) {\n\t\t\tconst filePath = `${path}${path ? '/' : ''}${file.name}`;\n\t\t\tif (file.type === 'folder') {\n\t\t\t\tstack.push({\n\t\t\t\t\ttree: file.children,\n\t\t\t\t\tpath: filePath,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdescendants.push(filePath);\n\t\t\t}\n\t\t}\n\t}\n\treturn descendants;\n}\n\nexport function removePathPrefix(path: string, prefix: string) {\n\tif (path.startsWith(prefix)) {\n\t\treturn path.substring(prefix.length);\n\t}\n\treturn path;\n}\n","import { StreamedFile } from '@php-wasm/stream-compression';\nimport type { FileTree } from '@php-wasm/universal';\nimport { normalizePath } from '@php-wasm/util';\nimport type { Entry } from '@zip.js/zip.js';\nimport { ZipReader, BlobWriter, BlobReader } from '@zip.js/zip.js';\n\nexport interface Filesystem {\n\tread(path: string): Promise<StreamedFile>;\n}\n\nexport class InMemoryFilesystem implements Filesystem {\n\tprivate fileTree: FileTree;\n\n\tconstructor(fileTree: FileTree) {\n\t\tthis.fileTree = fileTree;\n\t}\n\n\tasync read(path: string): Promise<StreamedFile> {\n\t\tlet content = this.getEntryAtPath(path);\n\t\tif (typeof content === 'string') {\n\t\t\tcontent = new TextEncoder().encode(content);\n\t\t} else if (!(content instanceof Uint8Array)) {\n\t\t\tthrow new Error(`Unsupported content type: ${typeof content}`);\n\t\t}\n\t\tconst stream = new ReadableStream({\n\t\t\tstart(controller) {\n\t\t\t\tcontroller.enqueue(content);\n\t\t\t\tcontroller.close();\n\t\t\t},\n\t\t});\n\t\treturn new StreamedFile(stream, path, {\n\t\t\tfilesize: content.byteLength,\n\t\t});\n\t}\n\n\tprivate getEntryAtPath(path: string): Uint8Array | string | FileTree {\n\t\tlet remainingPath = path.replace(/^\\//, '');\n\t\tlet currentSubtree = this.fileTree;\n\t\twhile (remainingPath) {\n\t\t\tif (currentSubtree[remainingPath]) {\n\t\t\t\treturn currentSubtree[remainingPath];\n\t\t\t}\n\t\t\tconst segments = remainingPath.split('/');\n\t\t\tconst nextSegment = segments.shift();\n\t\t\tif (!nextSegment || !currentSubtree[nextSegment]) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrentSubtree = currentSubtree[nextSegment] as FileTree;\n\t\t\tremainingPath = segments.join('/');\n\t\t}\n\t\tthrow new Error(`File not found at ${path}`);\n\t}\n}\n\nexport class ZipFilesystem implements Filesystem {\n\tprivate entries: Map<string, Entry> = new Map();\n\tprivate zipReader: ZipReader<BlobReader>;\n\n\tstatic fromStream(stream: ReadableStream<Uint8Array>): ZipFilesystem {\n\t\tconst zipReader = new ZipReader(\n\t\t\tnew BlobReader(new StreamedFile(stream, 'archive.zip'))\n\t\t);\n\t\treturn new ZipFilesystem(zipReader);\n\t}\n\n\tstatic fromArrayBuffer(arrayBuffer: ArrayBuffer): ZipFilesystem {\n\t\tconst zipReader = new ZipReader(\n\t\t\tnew BlobReader(new Blob([arrayBuffer]))\n\t\t);\n\t\treturn new ZipFilesystem(zipReader);\n\t}\n\n\tconstructor(zipReader: ZipReader<BlobReader>) {\n\t\tthis.zipReader = zipReader;\n\t}\n\n\tasync read(relativePath: string): Promise<StreamedFile> {\n\t\tconst entry = await this.getEntry(relativePath);\n\t\tconst blob = await entry.getData!(new BlobWriter());\n\t\treturn new StreamedFile(blob.stream(), relativePath, {\n\t\t\tfilesize: entry.uncompressedSize,\n\t\t});\n\t}\n\n\tprivate async getEntry(relativePath: string): Promise<Entry> {\n\t\tconst entries = await this.getEntries();\n\t\tconst entry = entries.get(relativePath.replace(/^\\//, ''));\n\t\tif (!entry) {\n\t\t\tthrow new Error(`File ${relativePath} not found in the zip.`);\n\t\t}\n\t\treturn entry;\n\t}\n\n\tprivate async getEntries(): Promise<Map<string, Entry>> {\n\t\tif (this.entries.size === 0) {\n\t\t\tconst entries = await this.zipReader.getEntries();\n\t\t\tfor (const entry of entries) {\n\t\t\t\tthis.entries.set(entry.filename, entry);\n\t\t\t}\n\t\t}\n\t\treturn this.entries;\n\t}\n}\n\n/**\n * A Filesystem implementation that cascades through multiple filesystems\n * and returns the first successful result.\n *\n * This is useful for creating a layered approach to file resolution,\n * such as checking a local cache before fetching from a remote source.\n */\nexport class OverlayFilesystem implements Filesystem {\n\tprivate filesystems: Filesystem[];\n\n\t/**\n\t * Creates a new OverlayFilesystem.\n\t *\n\t * @param filesystems An array of Filesystem instances to cascade through.\n\t *                    The order determines the priority - earlier filesystems\n\t *                    are checked first.\n\t */\n\tconstructor(filesystems: Filesystem[]) {\n\t\tif (!filesystems.length) {\n\t\t\tthrow new Error(\n\t\t\t\t'OverlayFilesystem requires at least one filesystem'\n\t\t\t);\n\t\t}\n\t\tthis.filesystems = filesystems;\n\t}\n\n\t/**\n\t * Reads a file by trying each filesystem in order until one succeeds.\n\t *\n\t * @param path The path to the file to read.\n\t * @returns A Promise that resolves to a StreamedFile from the first\n\t *          filesystem that successfully resolves the path.\n\t * @throws Error if all filesystems fail to resolve the path.\n\t */\n\tasync read(path: string): Promise<StreamedFile> {\n\t\tconst errors: Error[] = [];\n\n\t\t// Try each filesystem in order\n\t\tfor (const filesystem of this.filesystems) {\n\t\t\ttry {\n\t\t\t\treturn await filesystem.read(path);\n\t\t\t} catch (error) {\n\t\t\t\t// Collect the error and continue to the next filesystem\n\t\t\t\terrors.push(\n\t\t\t\t\terror instanceof Error ? error : new Error(String(error))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we get here, all filesystems failed\n\t\tconst errorMessages = errors.map((e) => e.message).join('; ');\n\t\tthrow new Error(\n\t\t\t`Failed to read ${path} from any filesystem: ${errorMessages}`,\n\t\t\t{ cause: errors }\n\t\t);\n\t}\n}\n\nexport interface FetchFilesystemOptions {\n\tcorsProxy?: string;\n\tbaseUrl: string;\n}\n\n/**\n * A Filesystem implementation that fetches files from URLs.\n * It can optionally use a CORS proxy and resolve paths relative to a base URL.\n */\nexport class FetchFilesystem implements Filesystem {\n\tprivate baseUrl = '';\n\tprivate options: FetchFilesystemOptions;\n\tprivate isDataUrl: boolean;\n\n\tconstructor(options: FetchFilesystemOptions) {\n\t\tthis.options = options;\n\t\tthis.isDataUrl = options.baseUrl.startsWith('data:');\n\t\tif (this.isDataUrl) {\n\t\t\treturn;\n\t\t}\n\t\t// Ensure the base URL ends with a slash\n\t\tconst url = new URL('./', options.baseUrl);\n\t\tif (url.protocol !== 'http:' && url.protocol !== 'https:') {\n\t\t\tthrow new Error(\n\t\t\t\t'Unsupported protocol: ' +\n\t\t\t\t\turl.protocol +\n\t\t\t\t\t'. Only HTTP and HTTPS are supported.'\n\t\t\t);\n\t\t}\n\t\tthis.baseUrl = url.origin + url.pathname;\n\t}\n\n\tasync read(path: string): Promise<StreamedFile> {\n\t\tif (this.isDataUrl) {\n\t\t\tthrow new Error(\n\t\t\t\t'FetchFilesystem cannot fetch files from data URLs'\n\t\t\t);\n\t\t}\n\n\t\t// Make sure there's no .. segments in the path\n\t\tpath = normalizePath(path);\n\t\t// Prevent escaping the base URL\n\t\tconst cleanPath = path.replace(/^\\//, '');\n\n\t\t// Resolve path to a URL\n\t\tconst url = new URL(cleanPath, this.baseUrl).toString();\n\t\tif (!url.startsWith(this.baseUrl)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Refused to read a file outside of the base URL: ${url}`\n\t\t\t);\n\t\t}\n\n\t\t// Apply CORS proxy if configured\n\t\tconst finalUrl = this.options.corsProxy\n\t\t\t? `${this.options.corsProxy}${encodeURIComponent(url)}`\n\t\t\t: url;\n\n\t\t// Fetch the file\n\t\tconst response = await fetch(finalUrl);\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(\n\t\t\t\t`Failed to fetch file at ${path}: ${response.statusText}`\n\t\t\t);\n\t\t}\n\n\t\t// Get the content length if available\n\t\tconst filesize = response.headers.get('content-length')\n\t\t\t? parseInt(response.headers.get('content-length')!, 10)\n\t\t\t: undefined;\n\n\t\t// Return as a StreamedFile\n\t\treturn new StreamedFile(response.body!, path, { filesize });\n\t}\n}\n\n/**\n * A Filesystem implementation that uses the \"fs\" and \"path\" modules from Node.js\n * to read files from the local file system.\n *\n * This is only available in a local environment.\n */\nexport class NodeJsFilesystem implements Filesystem {\n\tprivate fs: any;\n\tprivate path: any;\n\tprivate root: string;\n\n\tconstructor(root: string) {\n\t\tthis.root = root;\n\t}\n\n\tprivate async ensureNodeModules() {\n\t\tif (!this.fs || !this.path) {\n\t\t\ttry {\n\t\t\t\tthis.fs = await import('fs');\n\t\t\t\tthis.path = await import('path');\n\t\t\t} catch {\n\t\t\t\tthis.fs = require('fs');\n\t\t\t\tthis.path = require('path');\n\t\t\t}\n\t\t\tthis.root = this.path.resolve(this.root) + this.path.sep;\n\t\t}\n\t}\n\n\tasync read(filePath: string): Promise<StreamedFile> {\n\t\tawait this.ensureNodeModules();\n\n\t\tfilePath = this.path.resolve(\n\t\t\tthis.root,\n\t\t\tthis.path.normalize(filePath.replace(/^\\//, ''))\n\t\t);\n\t\tif (!filePath.startsWith(this.root)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Refused to read a file outside of the root directory: ${filePath}`\n\t\t\t);\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fullPath = this.path.resolve(filePath);\n\t\t\tconst stream = this.fs.createReadStream(fullPath);\n\n\t\t\tstream.on('error', (err: any) => {\n\t\t\t\treject(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t`Failed to read file at ${filePath}: ${err.message}`\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tthis.fs.stat(fullPath, (err: any, stats: any) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t`Failed to read file at ${filePath}: ${err.message}`\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(\n\t\t\t\t\t\tnew StreamedFile(\n\t\t\t\t\t\t\tnodeStreamToReadableStream(stream),\n\t\t\t\t\t\t\tfilePath,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilesize: stats.size,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nfunction nodeStreamToReadableStream(stream: any): ReadableStream {\n\tconst readableStream = new ReadableStream({\n\t\tstart(controller) {\n\t\t\tstream.on('data', (chunk: Buffer) => controller.enqueue(chunk));\n\t\t\tstream.on('end', () => controller.close());\n\t\t},\n\t});\n\treturn readableStream;\n}\n"],"names":["createClient","githubToken","Octokit","filesListToObject","files","root","result","file","getFilesFromDirectory","octokit","owner","repo","ref","path","options","onProgress","filePromises","directoryPromises","content","item","getFileContent","filesInDirs","dir","semaphore","Semaphore","release","fileContent","base64ToUint8Array","base64","binaryString","len","bytes","i","getArtifact","pull_number","workflow_id","pullRequest","runId","_a","artifacts","mayPush","repository","headers","createOrUpdateBranch","branch","newHead","fork","user","createCommit","message","parentSha","treeSha","sha","createTree","changeset","tree","createTreeNodes","newTreeSha","blobsPromises","createTreeNode","deleteFile","blobs","blob","blobSemaphore","stringContent","uint8ArrayToBase64","binary","iterateFiles","playground","exceptPaths","normalizePath","stack","currentParent","absPath","joinPaths","filesBefore","filesAfter","changes","seenFilesAfter","fileAfter","before","after","uint8arraysEqual","pathBefore","a","b","val","index","directoryHandleFromMountDevice","device","opfsPathToDirectoryHandle","opfsPath","parts","p","handle","part","directoryHandleToOpfsPath","directoryHandle","pathParts","clearContentsFromMountDevice","mountDevice","parentHandle","name","fromValue","value","queue","getIterator","iterable","StreamReader","stream","n","done","buffers","lengthBuffers","nextbuffer","acc","buffer","padHex","s","GitPktLine","line","length","hexlength","reader","err","BaseError","json","e","InternalError","UnsafeFilepathError","filepath","compareStrings","comparePath","compareTreeEntryPath","appendSlashIfDir","entry","mode2type","mode","parseBuffer","_entries","cursor","space","nullchar","type","oid","limitModeToAllowed","nudgeIntoShape","GitTree","entries","formatAuthor","email","timestamp","timezoneOffset","formatTimezoneOffset","minutes","sign","simpleSign","negateExceptForZero","hours","strHours","strMinutes","normalizeNewlines","str","parseAuthor","author","offset","parseTimezoneOffset","GitAnnotatedTag","tag","obj","hs","h","key","signature","secretKey","payload","signedTag","indent","x","outdent","GitCommit","commit","committer","signedCommit","GitObject","object","actualLength","BufferCursor","r","enc","source","start","end","applyDelta","delta","sourceSize","readVarIntLE","targetSize","target","firstOp","readOp","writer","tell","shift","byte","readCompactLE","flags","size","COPY","OFFS","SIZE","listpack","onData","PACK","version","numObjects","ofs","reference","parseHeader","inflator","pako","chunk","inflate","inherits_browserModule","ctor","superCtor","TempCtor","base64Js","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","code","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","output","extraBytes","maxChunkLength","len2","ieee754","isLE","mLen","nBytes","m","eLen","eMax","eBias","nBits","d","c","rt","require$$0","require$$1","customInspectSymbol","exports","Buffer","SlowBuffer","K_MAX_LENGTH","typedArraySupport","proto","createBuffer","buf","arg","encodingOrOffset","allocUnsafe","from","fromString","fromArrayView","isInstance","fromArrayBuffer","valueOf","fromObject","assertSize","alloc","fill","encoding","checked","string","actual","fromArrayLike","array","arrayView","copy","byteOffset","numberIsNaN","y","list","pos","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","max","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","arrayIndexOf","indexSize","arrLength","valLength","read","foundIndex","found","j","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","hexSliceLookupTable","newBuf","checkOffset","ext","noAssert","mul","checkInt","min","maxBytes","limit","sub","checkIEEE754","writeFloat","littleEndian","writeDouble","targetStart","INVALID_BASE64_RE","base64clean","units","leadSurrogate","byteArray","hi","lo","src","dst","alphabet","table","i16","copyProps","module","SafeBuffer","Hash","blockSize","finalSize","data","block","accum","assigned","remainder","rem","bits","lowBits","highBits","hash","inherits","require$$2","K","W","Sha1","rotl1","rotl5","rotl30","ft","M","t","H","sha1","toHex","hex","supportsSubtleSHA1","shasum","testSubtleSHA1","subtleSHA1","shasumSync","decodeVarInt","multibyte","lastSeven","otherVarIntDecode","startWith","GitPackIndex","stuff","idx","getExternalRefDelta","hashes","offsets","packfileSha","pack","listpackTypes","offsetToObject","crcs","totalObjectCount","lastPercent","percent","offsetArray","o","crc","crc32","count","objectsByDepth","write","fanoutBuffer","crcsBuffer","offsetsBuffer","totalBuffer","shaBuffer","types","raw","btype","lastFour","base","baseOffset","InvalidOidError","ObjectTypeError","expected","forAwait","cb","iter","collect","nextIndex","FIFO","resolve","GitSideBand","input","packetlines","packfile","progress","nextBit","error","parseUploadPackResponse","shallows","unshallows","acks","nak","reject","status","sparseCheckout","repoUrl","commitHash","filesPaths","treesIdx","fetchWithoutBlobs","objects","resolveObjects","blobsIdx","fetchObjects","fetchedPaths","extractGitObjectFromIdx","listGitFiles","rootTree","resolveAllObjects","gitTreeToFileTree","resolveCommitHash","refs","listGitRefs","fullyQualifiedBranchPrefix","packbuffer","response","parseGitResponseLines","spaceAt","iterator","streamToIterator","originalRead","rest","readObject","rootItem","items","readItem","subitem","paths","resolvedOids","currentObject","segments","segment","url","objectHashes","objectHash","text","at","lineLength","listDescendantFiles","selectedPath","isRoot","currentTree","descendants","filePath","removePathPrefix","prefix","InMemoryFilesystem","fileTree","controller","StreamedFile","remainingPath","currentSubtree","nextSegment","ZipFilesystem","zipReader","ZipReader","BlobReader","arrayBuffer","relativePath","BlobWriter","OverlayFilesystem","filesystems","errors","filesystem","errorMessages","FetchFilesystem","cleanPath","finalUrl","filesize","NodeJsFilesystem","fullPath","stats","nodeStreamToReadableStream"],"mappings":"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","x_google_ignoreList":[27,28,29,30,31,32,33]}